(window["webpackJsonppiu-spy-web-2"]=window["webpackJsonppiu-spy-web-2"]||[]).push([[0],{102:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(16),c=a.n(l),s=a(42),o=a(34),i=(a(73),a(5)),u=a(6),m=a(7),p=a(8),d=a(9),h=a(25),g=(a(74),a(27)),f=a(2),b=a(55),v=a(44),E=a(3),y=a.n(E),O=a(57),N=a(28),k=a(15),j=a.n(k),w=a(58),C=a.n(w),x=a(45),F=a.n(x),S=a(108),D=a(62),P=a.n(D),R=a(107),B=a(48),_=a.n(B),T=a(46),L=a.n(T),A=a(23),I=a(1),M=a(63),V=a(61),q=(a(81),{preventOverflow:{enabled:!0,padding:10,boundariesElement:"viewport"}}),U={right:"left",left:"right",top:"bottom",bottom:"top"},J=function(e){return e&&U[e.split("-")[0]]},X=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).state={isVisible:!1},e.containerItemRef=r.a.createRef(),e.renderPopper=e.renderPopper.bind(Object(I.a)(e)),e.toggleOverlayVisibility=e.toggleOverlayVisibility.bind(Object(I.a)(e)),e}return Object(d.a)(t,e),Object(u.a)(t,[{key:"hideOverlay",value:function(){this.setState({isVisible:!1})}},{key:"toggleOverlayVisibility",value:function(){this.setState({isVisible:!this.state.isVisible})}},{key:"handleClickOutside",value:function(e){e&&e.target.closest(".inner-popper-overlay")||this.hideOverlay()}},{key:"renderPopper",value:function(e){var t=e.ref,a=e.style,n=e.placement,l=e.arrowProps,c=(e.scheduleUpdate,e.outOfBoundaries),s=this.props,o=s.children,i=s.hideWhenOutOfBounds;return r.a.createElement("div",{ref:t,style:a,"data-placement":n,className:j()("inner-popper-overlay","arrow-".concat(J(n)),this.props.overlayClassName,{"out-of-bounds":c&&i})},r.a.createElement("div",{className:"arrow-hider"},r.a.createElement("div",{className:"arrow",ref:l.ref,style:l.style})),r.a.createElement("div",{className:"inner-popper-content"},o))}},{key:"render",value:function(){var e=this.props,t=e.placement,a=e.overlayItem,n=this.state.isVisible;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"overlay-item",ref:this.containerItemRef,onClick:this.toggleOverlayVisibility},a),n&&c.a.createPortal(r.a.createElement(M.a,{container:document.body,modifiers:q,placement:t,referenceElement:this.containerItemRef.current},this.renderPopper),document.body))}}]),t}(r.a.PureComponent);X.defaultTypes={placement:"bottom"};var z=Object(V.a)(X),W=(a(82),function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.active,a=e.onToggle,n=e.text;return r.a.createElement("div",{className:j()("toggle-button",{active:t}),onClick:function(){return a(!t)}},n)}}]),t}(r.a.PureComponent)),G=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={value:(y.a.isNil(e.value)?e.defaultValue:e.value)||""},y.a.bindAll(["handleChange","handleBlur"],Object(I.a)(a)),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e){e.value!==this.props.value&&this.setState({value:this.props.value})}},{key:"handleChange",value:function(e){var t=this,a=e.target.value;this.setState({value:a},function(){return t.props.onChange(a)})}},{key:"handleBlur",value:function(e){var t=this.props.type,a=this.state.value;if("number"===t){var n=Number(a);n>=Number(e.target.min)&&n<=Number(e.target.max)?this.props.onBlur(n,e):(this.setState({value:this.props.value}),this.props.onBlur(this.props.value,e))}}},{key:"render",value:function(){var e=this.props.className;return r.a.createElement("input",Object.assign({},y.a.omit(["defaultValue","onChange"],this.props),{className:j()(e,"text-input"),value:this.state.value,onBlur:this.handleBlur,onInput:this.handleChange}))}}]),t}(r.a.Component);G.defaultProps={value:null,type:"text",onChange:y.a.noop,onBlur:y.a.noop};a(83);var H=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).onChange=function(t){e.props.onChange(t.target.checked)},e.id=y.a.uniqueId(),e}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"toggle-checkbox"},r.a.createElement("input",{type:"checkbox",className:"toggle-checkbox-cb",id:this.id,onChange:this.onChange,checked:this.props.checked}),r.a.createElement("label",{htmlFor:this.id,className:"toggle"},r.a.createElement("span",null)),r.a.createElement("label",{htmlFor:this.id,className:"text-label"},this.props.children))}}]),t}(r.a.Component),K=(a(84),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this))).state={open:e.defaultOpen||!1},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.children,n=t.title,l=t.className,c=this.state.open;return r.a.createElement("div",{className:j()("collapsible-bar",l,{open:c})},r.a.createElement("div",{className:"header",onClick:function(){return e.setState(function(e){return{open:!e.open}})}},r.a.createElement("div",{className:"collapse-button"},r.a.createElement(A.c,null)),r.a.createElement("div",{className:"title"},n)),a&&r.a.createElement("div",{className:"collapsible-children"},a))}}]),t}(n.PureComponent)),Q=(a(85),a(86),a(30)),Y=a.n(Q),Z=a(33),$=function(){var e=Object(Z.a)(Y.a.mark(function e(t){var a,n,r;return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,e.prev=1,e.next=4,fetch(a);case 4:if(!((n=e.sent).status>=200&&n.status<300)){e.next=12;break}return e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r);case 12:throw Error("HTTP Status "+n.status);case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",Promise.reject(e.t0));case 19:case"end":return e.stop()}},e,null,[[1,15]])}));return function(t){return e.apply(this,arguments)}}();function ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ee(a,!0).forEach(function(t){Object(f.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ae="TOP/LOADING",ne="TOP/SUCCESS",re="TOP/ERROR",le={isLoading:!1,data:[]},ce=y.a.flow(y.a.get("top"),y.a.values,y.a.map(function(e){return{song:e.track,chartLabel:e.chart_label,chartLevel:e.chart_label.slice(1),chartType:e.chart_label.slice(0,1),mix:e.mix,results:e.results.map(function(t,a){var n=Math.sqrt(t.perfects)*y.a.toInteger(e.chart_label.slice(1))/2,r=Math.floor((100*n+60*t.greats+30*t.goods+-20*t.misses)/(n+t.greats+t.goods+t.bads+t.misses)*100)/100;return{nickname:t.nickname,date:t.gained,dateObject:new Date(t.gained),grade:t.grade,isExactDate:!!t.exact_gain_date,score:t.score,perfect:t.perfects,great:t.greats,good:t.goods,bad:t.bads,miss:t.misses,combo:t.max_combo,mods:t.mods_list,isRank:!!t.rank_mode,accuracy:t.max_combo?r>0?r:0:null}})}}),y.a.map(function(e){return te({},e,{latestScoreDate:e.results.reduce(function(e,t){return t.date>e?t.date:e},e.results[0].date),results:e.results.map(function(t){return te({},t,{hasRankScore:y.a.some({nickname:t.nickname,isRank:!0},e.results)})})})}),y.a.orderBy(["latestScoreDate","song","chartLevel"],["desc","asc","desc"]),function(e){return{data:e}});var se=["#FF6633","#66991A","#6666FF","#E6B333","#CC80CC","#E64D66","#4DB3FF","#99E6E6","#99FF99","#FFFF99","#FFB399","#809900","#00B3E6","#3366E6","#999966","#B34D4D","#80B300","#E6B3B3","#6680B3","#66664D","#FF99E6","#CCFF1A","#FF1A66","#33FFCC","#4D8000","#B33300","#991AFF","#E666FF","#1AB399","#E666B3","#33991A","#4D8066","#CC9999","#B3B31A","#00E680","#E6331A","#809980","#E6FF80","#1AFF33","#999933","#FF3380","#CCCC00","#66E64D","#4D80CC","#9900B3","#4DB380","#FF4D4D"];function oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ie(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?oe(a,!0).forEach(function(t){Object(f.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oe(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}S.a.addLocale(P.a);var ue=new S.a("ru-RU"),me={flavour:"long",gradation:R.a,units:["day","week","month"]},pe=function(e){return r.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"}},r.a.createElement("div",null,"\u0442\u043e\u0447\u043d\u0430\u044f \u0434\u0430\u0442\u0430 \u0432\u0437\u044f\u0442\u0438\u044f \u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430"),r.a.createElement("div",null,"\u0441\u043a\u043e\u0440 \u0431\u044b\u043b \u0437\u0430\u043f\u0438\u0441\u0430\u043d \u0441 my best \u0438\u043b\u0438 machine best"),r.a.createElement("div",null,"\u0434\u0430\u0442\u0430 \u0437\u0430\u043f\u0438\u0441\u0438: ",e.toLocaleDateString()))},de=new Date,he="default",ge="protagonist",fe=[{label:"\u043d\u043e\u0432\u0438\u0437\u043d\u0435 \u0441\u043a\u043e\u0440\u043e\u0432",value:he},{label:"\u043e\u0442\u0441\u0442\u0430\u0432\u0430\u043d\u0438\u044e \u043e\u0442 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0445",value:ge}],be=[1,28],ve=function(e,t){var a,n=y.a.map("value",t.players),r=y.a.map("value",t.playersOr),l=y.a.map("value",t.playersNot),c=y.a.get("value",t.sortingType),s=y.a.get("value",t.protagonist),o=y.a.map("value",t.excludeAntagonists),i=[y.a.orderBy(["latestScoreDate"],["desc"])],u=(a={},Object(f.a)(a,he,i),Object(f.a)(a,ge,[y.a.filter(function(e){return y.a.map("nickname",e.results).includes(s)}),y.a.map(function(e){var t=y.a.findIndex({nickname:s},e.results),a=e.results[t].score,n=y.a.flow([y.a.take(t),y.a.uniqBy("nickname"),y.a.remove(function(e){return o.includes(e.nickname)||e.score===a})])(e.results);return ie({},e,{distanceFromProtagonist:Math.sqrt(y.a.reduce(function(e,t){return e+Math.pow(t.score/a-.99,2)},0,n))})}),y.a.orderBy(["distanceFromProtagonist"],["desc"])]),a)[c]||i;return y.a.flow(y.a.compact([t.chartRange&&function(e){return function(e,t){var a=y.a.getOr(be,"range",e),n=y.a.getOr(null,"type",e);return y.a.flow(y.a.filter(function(e){return e.chartLevel>=a[0]&&e.chartLevel<=a[1]&&(!n||n===e.chartType)}))(t)}(t.chartRange,e)},!t.showRank&&y.a.map(function(e){return ie({},e,{results:y.a.filter(function(e){return!e.isRank},e.results)})}),t.showRank&&t.showOnlyRank&&y.a.map(function(e){return ie({},e,{results:y.a.filter(function(e){return e.isRank},e.results)})}),t.showRank&&!t.showOnlyRank&&!t.showRankAndNorank&&y.a.map(function(e){var t=[];return ie({},e,{results:y.a.filter(function(e){var a=t.includes(e.nickname);return t.push(e.nickname),!a},e.results)})}),(n.length||r.length||l.length)&&y.a.filter(function(e){var t=y.a.map("nickname",e.results);return(!n.length||y.a.every(function(e){return t.includes(e)},n))&&(!r.length||y.a.some(function(e){return t.includes(e)},r))&&(!l.length||!y.a.some(function(e){return t.includes(e)},l))}),y.a.filter(function(e){return y.a.size(e.results)})].concat(Object(g.a)(u),[t.song&&function(e){return Object(b.a)(e,t.song,{keys:["song"]})},y.a.map(function(e){var t=1,a=[];return ie({},e,{results:e.results.map(function(n,r){var l=a.includes(n.nickname);return a.push(n.nickname),0===r?t=1:l||n.score===y.a.get([r-1,"score"],e.results)||(t+=1),ie({},n,{topPlace:t,isSecondOccurenceInResults:l})})})})])))(e)};function Ee(e){var t=e.filterValue,a=e.onChange,n=y.a.getOr(be,"range",t),l=y.a.getOr(null,"type",t),c="\u0444\u0438\u043b\u044c\u0442\u0440 \u0447\u0430\u0440\u0442\u043e\u0432";if(t){var s=l||"";c="\u0447\u0430\u0440\u0442\u044b: "+(c=n[0]===n[1]?"".concat(s).concat(n[0]):"".concat(s).concat(n[0]," - ").concat(s).concat(n[1]))}return r.a.createElement("div",null,r.a.createElement(z,{overlayClassName:"chart-range-overlay-outer",overlayItem:r.a.createElement("button",{className:"filter-charts-button btn btn-sm btn-dark"},c)},r.a.createElement("div",{className:"chart-range-overlay"},r.a.createElement("div",{className:"buttons"},r.a.createElement(W,{text:"S",active:!l||"S"===l,onToggle:function(e){a({range:n,type:e?null:"D"})}}),r.a.createElement(W,{text:"D",active:!l||"D"===l,onToggle:function(e){a({range:n,type:e?null:"S"})}})),r.a.createElement(v.Range,{values:n,step:1,min:be[0],max:be[1],onChange:function(e){return a({type:l,range:e})},renderTrack:function(e){var t=e.props,a=e.children;return r.a.createElement("div",{onMouseDown:t.onMouseDown,onTouchStart:t.onTouchStart,style:ie({},t.style,{height:"10px",display:"flex",width:"100%"})},r.a.createElement("div",{ref:t.ref,style:{height:"6px",width:"100%",borderRadius:"3px",background:Object(v.getTrackBackground)({values:n,colors:["#ccc","#337ab7","#ccc"],min:be[0],max:be[1]}),alignSelf:"center"}},a))},renderThumb:function(e){var t=e.props,a=e.isDragged;return r.a.createElement("div",Object.assign({},t,{style:ie({},t.style,{height:"12px",width:"12px",borderRadius:"6px",backgroundColor:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0px 2px 3px #AAA"})}),r.a.createElement("div",{style:{height:"6px",width:"6px",borderRadius:"3px",backgroundColor:a?"#337ab7":"#CCC"}}))}}),r.a.createElement("div",{className:"inputs"},r.a.createElement("button",{className:"btn btn-sm btn-dark",onClick:function(){return a({type:l,range:[Math.max(n[0]-1,be[0]),n[1]]})}},r.a.createElement(A.a,null)),r.a.createElement(G,{type:"number",className:"form-control",min:be[0],max:Math.min(be[1],n[1]),value:n[0],onBlur:function(e){a({type:l,range:[e,n[1]]})}}),r.a.createElement("button",{className:"btn btn-sm btn-dark",onClick:function(){var e=Math.min(n[0]+1,be[1]);a({type:l,range:[e,n[1]<e?e:n[1]]})}},r.a.createElement(A.b,null)),r.a.createElement("div",{className:"_flex-fill"}),r.a.createElement("button",{className:"btn btn-sm btn-dark",onClick:function(){var e=Math.max(n[1]-1,be[0]);a({type:l,range:[n[0]>e?e:n[0],e]})}},r.a.createElement(A.a,null)),r.a.createElement(G,{type:"number",className:"form-control",min:Math.max(be[0],n[0]),max:be[1],value:n[1],onBlur:function(e){return a({type:l,range:[n[0],e]})}}),r.a.createElement("button",{className:"btn btn-sm btn-dark",onClick:function(){return a({type:l,range:[n[0],Math.min(n[1]+1,be[1])]})}},r.a.createElement(A.b,null))))))}var ye=Object(O.a)(function(e){return e.top.data},y.a.flow(y.a.flatMap(y.a.get("results")),y.a.map("nickname"),y.a.uniq,y.a.sortBy(y.a.toLower),y.a.map(function(e){return{label:e,value:e}}))),Oe={showRank:!0},Ne={fetchTopScores:function(){return function(){var e=Object(Z.a)(Y.a.mark(function e(t){var a;return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:ae}),e.prev=1,e.next=4,$({url:"".concat("https://vps720616.ovh.net:5000","/top")});case 4:return a=e.sent,t({type:ne,data:a}),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(1),t({type:re,error:e.t0});case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()}},ke=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={filter:Oe,showItemsCount:20},a.setFilter=y.a.curry(function(e,t){a.setState(function(a){return{filter:ie({},a.filter,Object(f.a)({},e,t))}},function(){F.a.setItem("filter",a.state.filter)})}),a.onRefresh=function(){a.props.isLoading||a.props.fetchTopScores()},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.isLoading||this.props.fetchTopScores(),F.a.getItem("filter").then(function(t){return t&&e.setState({filter:ie({},t,{chartRange:ie({},t.chartRange,{range:y.a.every(function(e){return e>=be[0]&&e<=be[1]},t.chartRange.range)?t.chartRange.range:be})})})}).catch(function(e){return console.warn("Cannot get filter from local storage",e)})}},{key:"renderSimpleSearch",value:function(){var e=this,t=this.props.isLoading;return r.a.createElement("div",{className:"simple-search"},r.a.createElement("div",{className:"song-name _margin-right _margin-bottom"},r.a.createElement(G,{value:this.state.filter.song||"",placeholder:"\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0435\u0441\u043d\u0438...",className:"form-control",onChange:this.setFilter("song")})),r.a.createElement("div",{className:"chart-range _margin-right _margin-bottom"},r.a.createElement(Ee,{filterValue:this.state.filter.chartRange,onChange:this.setFilter("chartRange")})),r.a.createElement("div",{className:"_flex-fill"}),r.a.createElement("div",{className:"_flex-row _margin-bottom"},r.a.createElement("button",{className:"btn btn-sm btn-dark btn-icon _margin-right",onClick:function(){return e.setState({filter:Oe})}},r.a.createElement(A.d,null)," \u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u044b"),r.a.createElement("button",{disabled:t,className:"btn btn-sm btn-dark btn-icon",onClick:this.onRefresh},r.a.createElement(A.e,null)," \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c")))}},{key:"renderFilters",value:function(){var e=this,t=this.props.players,a=this.state.filter;return r.a.createElement("div",{className:"filters"},r.a.createElement("div",{className:"people-filters"},r.a.createElement("label",{className:"label"},"\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0447\u0430\u0440\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u044b\u0433\u0440\u0430\u043b:"),r.a.createElement("div",{className:"players-block"},r.a.createElement("div",{className:"_margin-right"},r.a.createElement("label",{className:"label"},"\u043a\u0430\u0436\u0434\u044b\u0439 \u0438\u0437 \u044d\u0442\u0438\u0445"),r.a.createElement(N.a,{closeMenuOnSelect:!1,className:"select players",classNamePrefix:"select",placeholder:"\u0438\u0433\u0440\u043e\u043a\u0438...",isMulti:!0,options:t,value:y.a.getOr(null,"players",a),onChange:this.setFilter("players")})),r.a.createElement("div",{className:"_margin-right"},r.a.createElement("label",{className:"label"},"\u0438 \u0445\u043e\u0442\u044c \u043e\u0434\u0438\u043d \u0438\u0437 \u044d\u0442\u0438\u0445"),r.a.createElement(N.a,{closeMenuOnSelect:!1,className:"select players",classNamePrefix:"select",placeholder:"\u0438\u0433\u0440\u043e\u043a\u0438...",isMulti:!0,options:t,value:y.a.getOr(null,"playersOr",a),onChange:this.setFilter("playersOr")})),r.a.createElement("div",{className:"_margin-right"},r.a.createElement("label",{className:"label"},"\u0438 \u043d\u0438\u043a\u0442\u043e \u0438\u0437 \u044d\u0442\u0438\u0445"),r.a.createElement(N.a,{closeMenuOnSelect:!1,className:"select players",classNamePrefix:"select",placeholder:"\u0438\u0433\u0440\u043e\u043a\u0438...",isMulti:!0,options:t,value:y.a.getOr(null,"playersNot",a),onChange:this.setFilter("playersNot")})))),r.a.createElement("div",null,r.a.createElement(H,{checked:y.a.getOr(!1,"showRank",a),onChange:this.setFilter("showRank")},"\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0441\u043a\u043e\u0440\u044b \u043d\u0430 \u0440\u0430\u043d\u043a\u0435")),y.a.get("showRank",a)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(H,{checked:y.a.getOr(!1,"showOnlyRank",a),onChange:function(t){e.setFilter("showOnlyRank",t),y.a.get("showRankAndNorank",a)&&e.setFilter("showRankAndNorank",!1)}},r.a.createElement("strong",null,"\u0442\u043e\u043b\u044c\u043a\u043e")," \u043d\u0430 \u0440\u0430\u043d\u043a\u0435")),r.a.createElement("div",null,r.a.createElement(H,{checked:y.a.getOr(!1,"showRankAndNorank",a),onChange:function(t){e.setFilter("showRankAndNorank",t),y.a.get("showOnlyRank",a)&&e.setFilter("showOnlyRank",!1)}},"\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043b\u0443\u0447\u0448\u0438\u0435 \u0441\u043a\u043e\u0440\u044b \u0441 \u0440\u0430\u043d\u043a\u043e\u043c \u0438 \u0431\u0435\u0437"))))}},{key:"renderSortings",value:function(){var e=this.state.filter,t=this.props.players;return r.a.createElement("div",{className:"sortings"},r.a.createElement("div",null,r.a.createElement("label",{className:"label"},"\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e"),r.a.createElement(N.a,{placeholder:"\u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0443",className:"select",classNamePrefix:"select",clearable:!1,options:fe,value:y.a.getOr(fe[0],"sortingType",e),onChange:this.setFilter("sortingType")})),y.a.get("sortingType.value",e)===ge&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("label",{className:"label"},"\u043f\u0440\u043e\u0442\u0430\u0433\u043e\u043d\u0438\u0441\u0442 (\u043a\u043e\u0433\u043e \u0441\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u0442\u044c \u0441 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u043c\u0438):"),r.a.createElement(N.a,{className:j()("select players",{"red-border":!y.a.get("protagonist",e)}),classNamePrefix:"select",placeholder:"\u0438\u0433\u0440\u043e\u043a\u0438...",options:t,value:y.a.getOr(null,"protagonist",e),onChange:this.setFilter("protagonist")})),r.a.createElement("div",null,r.a.createElement("label",{className:"label"},"\u043d\u0435 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u0432 \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0438:"),r.a.createElement(N.a,{closeMenuOnSelect:!1,className:"select players",classNamePrefix:"select",placeholder:"\u0438\u0433\u0440\u043e\u043a\u0438...",options:t,isMulti:!0,value:y.a.getOr([],"excludeAntagonists",e),onChange:this.setFilter("excludeAntagonists")}))))}},{key:"render",value:function(){var e=this,t=this.props,a=t.isLoading,n=t.data,l=t.error,c=this.state,s=c.showItemsCount,o=c.filter,i=ve(n,o),u=i.length>s,m=y.a.slice(0,s,i),p=y.a.slice(0,se.length,y.a.uniq(y.a.compact([y.a.get("sortingType.value",o)===ge&&y.a.get("protagonist.value",o)].concat(Object(g.a)(y.a.map("value",o.players)),Object(g.a)(y.a.map("value",o.playersOr))))));return r.a.createElement("div",{className:"rankings"},r.a.createElement("header",null,"leaderboard"),r.a.createElement("div",{className:"content"},l&&l.message,r.a.createElement("div",{className:"search-block"},this.renderSimpleSearch(),r.a.createElement(K,{title:"\u0444\u0438\u043b\u044c\u0442\u0440\u044b"},this.renderFilters()),r.a.createElement(K,{title:"\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430"},this.renderSortings())),a&&"Loading...",r.a.createElement("div",{className:"top-list"},y.a.isEmpty(i)&&!a&&"\u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e",m.map(function(e,t){return r.a.createElement("div",{className:"song-block",key:e.song+e.chartLabel},r.a.createElement("div",{className:"song-name"},r.a.createElement("div",{className:j()("chart-name",{single:"S"===e.chartType})},e.chartType,r.a.createElement("span",{className:"chart-separator"}),e.chartLevel),r.a.createElement("div",null,e.song)),r.a.createElement("div",{className:"charts"},r.a.createElement("div",{className:"chart"},r.a.createElement("div",{className:"results"},r.a.createElement("table",null,0===t&&r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"place"}),r.a.createElement("th",{className:"nickname"}),r.a.createElement("th",{className:"rank"}),r.a.createElement("th",{className:"score"},"score"),r.a.createElement("th",{className:"grade"}),r.a.createElement("th",{className:"number"},"miss"),r.a.createElement("th",{className:"number"},"bad"),r.a.createElement("th",{className:"number"},"good"),r.a.createElement("th",{className:"number"},"great"),r.a.createElement("th",{className:"number"},"perfect"),r.a.createElement("th",{className:"combo"},"combo"),r.a.createElement("th",{className:"accuracy"},"accuracy"),r.a.createElement("th",{className:"date"}))),r.a.createElement("tbody",null,e.results.map(function(t){var a,n=p.indexOf(t.nickname);return r.a.createElement("tr",{key:t.score+t.nickname,className:j()({empty:!t.isExactDate})},r.a.createElement("td",{className:"place"},t.isSecondOccurenceInResults?"":"#".concat(t.topPlace)),r.a.createElement("td",{className:"nickname",style:n>-1?{fontWeight:"bold",color:se[n]}:{}},t.nickname,y.a.get("sortingType.value",o)===ge&&t.nickname===y.a.get("protagonist.value",o)&&e.distanceFromProtagonist>0&&r.a.createElement("span",{className:"protagonist-diff"}," ","-",(100*e.distanceFromProtagonist).toFixed(1),"%")),r.a.createElement("td",{className:j()("rank",{vj:t.isRank})},t.isRank&&(t.isExactDate?"VJ":r.a.createElement(_.a,{content:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"\u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u0440\u0430\u043d\u043a\u0430 \u043d\u0430 \u044d\u0442\u043e\u043c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0435 \u0431\u044b\u043b\u043e \u0443\u0433\u0430\u0434\u0430\u043d\u043e, \u043e\u0441\u043d\u043e\u0432\u044b\u0432\u0430\u044f\u0441\u044c \u043d\u0430 \u0441\u043a\u043e\u0440\u0435")),tooltipClassName:"timeago-tooltip"},"VJ?"))),r.a.createElement("td",{className:"score"},C()(t.score).format("0,0")),r.a.createElement("td",{className:"grade"},r.a.createElement("div",{className:"img-holder"},t.grade&&"?"!==t.grade&&r.a.createElement("img",{src:"".concat("/piu-spy-web","/grades/").concat(t.grade,".png"),alt:t.grade}),"?"===t.grade&&null)),r.a.createElement("td",{className:"number miss"},t.miss),r.a.createElement("td",{className:"number bad"},t.bad),r.a.createElement("td",{className:"number good"},t.good),r.a.createElement("td",{className:"number great"},t.great),r.a.createElement("td",{className:"number perfect"},t.perfect),r.a.createElement("td",{className:"combo"},t.combo,t.combo?"x":""),r.a.createElement("td",{className:"accuracy"},t.accuracy,t.accuracy?"%":""),r.a.createElement("td",{className:j()("date",{latest:t.date===e.latestScoreDate})},r.a.createElement(_.a,{content:t.isExactDate?(a=t.dateObject,a.toLocaleDateString()):pe(t.dateObject),tooltipClassName:"timeago-tooltip"},function(e){var t=ue.format(e,me);if(t)return t;var a=L()(de).startOf("day").diff(L()(e).startOf("day"),"days");return 0===a?"\u0441\u0435\u0433\u043e\u0434\u043d\u044f":1===a?"\u0432\u0447\u0435\u0440\u0430":""}(t.dateObject),t.isExactDate?"":"?")))})))))))}),!a&&u&&r.a.createElement("button",{className:"btn btn-sm btn-primary",onClick:function(){return e.setState(function(e){return{showItemsCount:e.showItemsCount+10}})}},"show more..."))))}}]),t}(n.Component),je=Object(o.b)(function(e){return{players:ye(e),data:e.top.data,error:e.top.error,isLoading:e.top.isLoading}},Ne)(ke),we=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(h.a,{exact:!0,path:"/",component:je}))}}]),t}(n.Component),Ce=a(26),xe=a(50);function Fe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Se=Object(Ce.c)({top:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return te({},e,{isLoading:!0});case re:return te({},e,{isLoading:!1,error:t.error});case ne:return te({},e,{isLoading:!1},ce(t.data));default:return e}}}),De=Object(Ce.e)(Se,window.__REDUX_DEVTOOLS_EXTENSION__?Object(Ce.d)(Object(Ce.a)(xe.a),window.__REDUX_DEVTOOLS_EXTENSION__({stateSanitizer:function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Fe(a,!0).forEach(function(t){Object(f.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Fe(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e)}})):Object(Ce.a)(xe.a));c.a.render(r.a.createElement(o.a,{store:De},r.a.createElement(s.a,null,r.a.createElement(we,null))),document.getElementById("root"))},64:function(e,t,a){e.exports=a(102)},73:function(e,t,a){},74:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},86:function(e,t,a){}},[[64,1,2]]]);
//# sourceMappingURL=main.fc6566c1.chunk.js.map