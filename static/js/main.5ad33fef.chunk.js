(window["webpackJsonppiu-spy-web-2"]=window["webpackJsonppiu-spy-web-2"]||[]).push([[0],{57:function(e,t,r){e.exports=r(93)},66:function(e,t,r){},67:function(e,t,r){},75:function(e,t,r){},76:function(e,t,r){},78:function(e,t,r){},93:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(15),o=r.n(c),i=r(38),l=r(30),s=r(97),u=r(53),p=r.n(u),f=(r(66),r(7)),d=r(8),b=r(9),m=r(10),h=r(11),v=r(23),O=(r(67),r(3)),g=r(55),y=r(47),j=r(40),w=r(6),E=r.n(w),k=r(49),P=r(54),x=r(2),S=r(56),D=r(5),T=r.n(D),_=r(52),C=(r(75),{preventOverflow:{enabled:!0,padding:10,boundariesElement:"viewport"}}),N={right:"left",left:"right",top:"bottom",bottom:"top"},L=function(e){return e&&N[e.split("-")[0]]},R=function(e){function t(){var e;return Object(f.a)(this,t),(e=Object(b.a)(this,Object(m.a)(t).call(this))).state={isVisible:!1},e.containerItemRef=a.a.createRef(),e.renderPopper=e.renderPopper.bind(Object(x.a)(e)),e.toggleOverlayVisibility=e.toggleOverlayVisibility.bind(Object(x.a)(e)),e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"hideOverlay",value:function(){this.setState({isVisible:!1})}},{key:"toggleOverlayVisibility",value:function(){this.setState({isVisible:!this.state.isVisible})}},{key:"handleClickOutside",value:function(e){e&&e.target.closest(".inner-popper-overlay")||this.hideOverlay()}},{key:"renderPopper",value:function(e){var t=e.ref,r=e.style,n=e.placement,c=e.arrowProps,o=(e.scheduleUpdate,e.outOfBoundaries),i=this.props,l=i.children,s=i.hideWhenOutOfBounds;return a.a.createElement("div",{ref:t,style:r,"data-placement":n,className:T()("inner-popper-overlay","arrow-".concat(L(n)),{"out-of-bounds":o&&s})},a.a.createElement("div",{className:"arrow-hider"},a.a.createElement("div",{className:"arrow",ref:c.ref,style:c.style})),a.a.createElement("div",{className:"inner-popper-content"},l))}},{key:"render",value:function(){var e=this.props,t=e.placement,r=e.overlayItem,n=this.state.isVisible;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"overlay-item",ref:this.containerItemRef,onClick:this.toggleOverlayVisibility},r),n&&o.a.createPortal(a.a.createElement(S.a,{container:document.body,modifiers:C,placement:t,referenceElement:this.containerItemRef.current},this.renderPopper),document.body))}}]),t}(a.a.PureComponent);R.defaultTypes={placement:"bottom"};var V=Object(_.a)(R),I=(r(76),function(e){function t(){return Object(f.a)(this,t),Object(b.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.active,r=e.onToggle,n=e.text;return a.a.createElement("div",{className:T()("toggle-button",{active:t}),onClick:function(){return r(!t)}},n)}}]),t}(a.a.PureComponent)),M=(r(77),r(78),r(25)),A=r.n(M),F=r(29),B=function(){var e=Object(F.a)(A.a.mark(function e(t){var r,n,a;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,e.prev=1,e.next=4,fetch(r);case 4:if(!((n=e.sent).status>=200&&n.status<300)){e.next=12;break}return e.next=8,n.json();case 8:return a=e.sent,e.abrupt("return",a);case 12:throw Error("HTTP Status "+n.status);case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",Promise.reject(e.t0));case 19:case"end":return e.stop()}},e,null,[[1,15]])}));return function(t){return e.apply(this,arguments)}}();function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(r,!0).forEach(function(t){Object(O.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var U="TOP/LOADING",X="TOP/SUCCESS",H="TOP/ERROR",J={isLoading:!1,data:[]},q=E.a.flow(E.a.get("top"),E.a.values,E.a.map(function(e){return{song:e.track,chartLabel:e.chart_label,chartLevel:e.chart_label.slice(1),chartType:e.chart_label.slice(0,1),mix:e.mix,results:E.a.map(function(e){return{nickname:e.nickname,date:e.gained,isExactDate:!!e.exact_gained_date,score:e.score,perfect:e.perfect,great:e.greats,good:e.goods,bad:e.bads,miss:e.misses,combo:e.max_combo,mods:e.mods_list,isRank:!!e.rank_mode}},e.results)}}),E.a.orderBy(["song","chartLabel"],["asc","asc"]),function(e){return{data:e}});function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(r,!0).forEach(function(t){Object(O.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Q=[1,29];function Y(e){e.column;var t=e.filter,r=e.onChange,n=t&&t.value,c=E.a.getOr(Q,"value.range",t),o=E.a.getOr(null,"value.type",t),i="Filter charts";if(n){var l=o||"";i=c[0]===c[1]?"".concat(l).concat(c[0]):"".concat(l).concat(c[0],"-").concat(l).concat(c[1])}return a.a.createElement("div",null,a.a.createElement(V,{overlayItem:a.a.createElement("button",{className:"filter-charts-button btn btn-sm btn-primary"},i)},a.a.createElement("div",{className:"chart-range-overlay"},a.a.createElement("div",{className:"buttons"},a.a.createElement(I,{text:"S",active:!o||"S"===o,onToggle:function(e){r({range:c,type:e?null:"D"})}}),a.a.createElement(I,{text:"D",active:!o||"D"===o,onToggle:function(e){r({range:c,type:e?null:"S"})}})),a.a.createElement(j.Range,{values:c,step:1,min:Q[0],max:Q[1],onChange:function(e){return r({type:o,range:e})},renderTrack:function(e){var t=e.props,r=e.children;return a.a.createElement("div",{onMouseDown:t.onMouseDown,onTouchStart:t.onTouchStart,style:K({},t.style,{height:"10px",display:"flex",width:"100%"})},a.a.createElement("div",{ref:t.ref,style:{height:"6px",width:"100%",borderRadius:"3px",background:Object(j.getTrackBackground)({values:c,colors:["#ccc","#337ab7","#ccc"],min:Q[0],max:Q[1]}),alignSelf:"center"}},r))},renderThumb:function(e){var t=e.props,r=e.isDragged;return a.a.createElement("div",Object.assign({},t,{style:K({},t.style,{height:"12px",width:"12px",borderRadius:"6px",backgroundColor:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0px 2px 3px #AAA"})}),a.a.createElement("div",{style:{height:"6px",width:"6px",borderRadius:"3px",backgroundColor:r?"#337ab7":"#CCC"}}))}}))))}var Z=function(e,t){var r=E.a.getOr(Q,"value.range",e),n=E.a.getOr(null,"value.type",e);return E.a.flow(E.a.filter(function(e){return e._original.chartLevel>=r[0]&&e._original.chartLevel<=r[1]&&(!n||n===e._original.chartType)}))(t)},$=Object(k.a)(function(e){return e.top.data},E.a.flow(E.a.flatMap(E.a.get("results")),E.a.map("nickname"),E.a.uniq,E.a.sortBy(E.a.identity),E.a.map(function(e){return{label:e,value:e}}))),ee={fetchTopScores:function(){return function(){var e=Object(F.a)(A.a.mark(function e(t){var r;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:U}),e.prev=1,e.next=4,B({url:"".concat("https://vps720616.ovh.net:5000","/top")});case 4:return r=e.sent,t({type:X,data:r}),e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(1),t({type:H,error:e.t0});case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()}},te=function(e){function t(){return Object(f.a)(this,t),Object(b.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.isLoading||this.props.fetchTopScores()}},{key:"getColumns",value:function(){var e=this.props.players;return console.log(e),[{minWidth:120,maxWidth:250,Header:"song",filterable:!0,filterMethod:function(e,t){return Object(y.a)(t,e.value,{keys:["song"]})},filterAll:!0,accessor:"song"},{minWidth:95,maxWidth:95,filterable:!0,filterAll:!0,Filter:Y,filterMethod:Z,accessor:"chartLabel"},{filterable:!0,filterMethod:function(e,t){var r=E.a.map("value",E.a.get("value",e));return E.a.filter(function(e){var t=E.a.map("nickname",e.results);return E.a.every(function(e){return t.includes(e)},r)},t)},filterAll:!0,Filter:function(t){t.column;var r=t.filter,n=t.onChange;return a.a.createElement(P.a,{closeMenuOnSelect:!1,className:"select players",classNamePrefix:"select",placeholder:"select players",isMulti:!0,options:e,value:E.a.get("value",r),onChange:n})},Cell:function(e){return a.a.createElement("div",null,e.original.results.map(function(e){return a.a.createElement("div",{key:e.nickname},e.nickname," - ",e.score)}))},accessor:"results"}]}},{key:"render",value:function(){var e=this.props,t=e.isLoading,r=e.data,n=e.error,c=e.players;return a.a.createElement("div",{className:"rankings"},a.a.createElement("header",null),a.a.createElement("div",{className:"content"},n&&n.message,a.a.createElement("div",{className:"top-list"},a.a.createElement(g.a,{data:r,columns:this.getColumns(),showPageSizeOptions:!1,defaultPageSize:20,sortable:!0,resizable:!1,minRows:4,noDataText:t?"loading...":"no data found",players:c}))))}}]),t}(n.Component),re=Object(l.b)(function(e){return{players:$(e),data:e.top.data,error:e.top.error,isLoading:e.top.isLoading}},ee)(te),ne=function(e){function t(){return Object(f.a)(this,t),Object(b.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"container"},a.a.createElement(v.a,{exact:!0,path:"/",component:re}))}}]),t}(n.Component),ae=r(24),ce=r(43);function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var ie=Object(ae.c)({top:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return z({},e,{isLoading:!0});case H:return z({},e,{isLoading:!1,error:t.error});case X:return z({},e,{isLoading:!1},q(t.data));default:return e}}}),le=Object(ae.e)(ie,window.__REDUX_DEVTOOLS_EXTENSION__?Object(ae.d)(Object(ae.a)(ce.a),window.__REDUX_DEVTOOLS_EXTENSION__({stateSanitizer:function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(r,!0).forEach(function(t){Object(O.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e)}})):Object(ae.a)(ce.a));s.a.locale(p.a),o.a.render(a.a.createElement(l.a,{store:le},a.a.createElement(i.a,null,a.a.createElement(ne,null))),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.5ad33fef.chunk.js.map