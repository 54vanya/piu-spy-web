(this["webpackJsonppiu-spy-web-2"]=this["webpackJsonppiu-spy-web-2"]||[]).push([[0],{221:function(e,t,a){e.exports=a(450)},226:function(e,t){Number.isNaN=Number.isNaN||function(e){return e!==e},"undefined"===typeof Math.sign&&(Math.sign=function(e){return e>0?1:e<0?-1:e}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),a=t.length>>>0;if("function"!==typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],n=0;n<a;){var c=t[n];if(e.call(r,c,n,t))return n;n++}return-1},configurable:!0,writable:!0})},239:function(e,t,a){},241:function(e,t,a){},242:function(e,t,a){},244:function(e,t,a){},245:function(e,t,a){},246:function(e,t,a){},247:function(e,t,a){},248:function(e,t,a){},264:function(e,t,a){},447:function(e,t,a){},448:function(e,t,a){},449:function(e,t,a){},450:function(e,t,a){"use strict";a.r(t);var r=a(11),n=(a(222),a(225),a(226),a(1)),c=a.n(n),s=a(23),l=a.n(s),o=a(26),i=a(32),u=a(14),m=a.n(u),d=a(3),p=a.n(d),g=(a(239),a(15)),h=a(16),f=a(18),b=a(17),v=a(19),E=a(49),y=(a(240),a(241),{leaderboard:{path:"/leaderboard"},ranking:{path:"/ranking",faq:{path:"/ranking/faq"}},profile:{path:"/profiles/:id",getPath:function(e){return"/profiles/".concat(e.id)}}}),O=a(13),N=a(46),k=a(5),S=a.n(k),j=a(89),P=a.n(j),w=a(69),x=a.n(w),R=a(10),C=(a(242),a(53)),D=a(198),I=a(183),A=(a(244),{preventOverflow:{enabled:!0,padding:10,boundariesElement:"viewport"}}),L={right:"left",left:"right",top:"bottom",bottom:"top"},F=function(e){return e&&L[e.split("-")[0]]},T=function(e){function t(){var e;return Object(g.a)(this,t),(e=Object(f.a)(this,Object(b.a)(t).call(this))).state={isVisible:!1},e.containerItemRef=c.a.createRef(),e.renderPopper=e.renderPopper.bind(Object(C.a)(e)),e.toggleOverlayVisibility=e.toggleOverlayVisibility.bind(Object(C.a)(e)),e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"hideOverlay",value:function(){this.setState({isVisible:!1})}},{key:"toggleOverlayVisibility",value:function(){this.setState({isVisible:!this.state.isVisible})}},{key:"handleClickOutside",value:function(e){e&&e.target.closest(".inner-popper-overlay")||this.hideOverlay()}},{key:"renderPopper",value:function(e){var t=e.ref,a=e.style,r=e.placement,n=e.arrowProps,s=(e.scheduleUpdate,e.outOfBoundaries),l=this.props,o=l.children,i=l.hideWhenOutOfBounds;return c.a.createElement("div",{ref:t,style:a,"data-placement":r,className:S()("inner-popper-overlay","arrow-".concat(F(r)),this.props.overlayClassName,{"out-of-bounds":s&&i})},c.a.createElement("div",{className:"arrow-hider"},c.a.createElement("div",{className:"arrow",ref:n.ref,style:n.style})),c.a.createElement("div",{className:"inner-popper-content"},o))}},{key:"render",value:function(){var e=this.props,t=e.placement,a=e.overlayItem,r=this.state.isVisible;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"overlay-item",ref:this.containerItemRef,onClick:this.toggleOverlayVisibility},a),r&&l.a.createPortal(c.a.createElement(D.a,{container:document.body,modifiers:A,placement:t,referenceElement:this.containerItemRef.current},this.renderPopper),document.body))}}]),t}(c.a.PureComponent);T.defaultTypes={placement:"bottom"};var M=Object(I.a)(T),_=(a(245),function(e){function t(){return Object(g.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.active,a=e.onToggle,r=e.text;return c.a.createElement("div",{className:S()("toggle-button",{active:t}),onClick:function(){return a(!t)}},r)}}]),t}(c.a.PureComponent));a(246);function B(){return c.a.createElement("div",{className:"loader"},c.a.createElement("svg",{width:"40",height:"12",viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:"#eee"},c.a.createElement("circle",{cx:"15",cy:"15",r:"15"},c.a.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),c.a.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})),c.a.createElement("circle",{cx:"60",cy:"15",r:"9",fillOpacity:"0.3"},c.a.createElement("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),c.a.createElement("animate",{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})),c.a.createElement("circle",{cx:"105",cy:"15",r:"15"},c.a.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),c.a.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"}))))}var K=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(f.a)(this,Object(b.a)(t).call(this,e))).state={value:(p.a.isNil(e.value)?e.defaultValue:e.value)||""},p.a.bindAll(["handleChange","handleBlur","handleKeyPress"],Object(C.a)(a)),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(e){e.value!==this.props.value&&this.setState({value:this.props.value})}},{key:"handleChange",value:function(e){var t=this,a=e.target.value;this.setState({value:a},(function(){return t.props.onChange(a)}))}},{key:"handleBlur",value:function(e){var t=this.props.type,a=this.state.value;if("number"===t){var r=Number(a);r>=Number(e.target.min)&&r<=Number(e.target.max)?this.props.onBlur(r,e):(this.setState({value:this.props.value}),this.props.onBlur(this.props.value,e))}}},{key:"handleKeyPress",value:function(e){"Enter"===e.key&&this.handleBlur(e)}},{key:"render",value:function(){var e=this.props.className;return c.a.createElement("input",Object.assign({},p.a.omit(["defaultValue","onChange"],this.props),{className:S()(e,"text-input"),value:this.state.value,onBlur:this.handleBlur,onKeyPress:this.handleKeyPress,onInput:this.handleChange,onChange:p.a.noop}))}}]),t}(c.a.Component);K.defaultProps={value:null,type:"text",onChange:p.a.noop,onBlur:p.a.noop};a(247);var q=function(e){function t(){var e;return Object(g.a)(this,t),(e=Object(f.a)(this,Object(b.a)(t).call(this))).onChange=function(t){e.props.onChange(t.target.checked)},e.id=p.a.uniqueId(),e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"toggle-checkbox"},c.a.createElement("input",{type:"checkbox",className:"toggle-checkbox-cb",id:this.id,onChange:this.onChange,checked:this.props.checked}),c.a.createElement("label",{htmlFor:this.id,className:"toggle"},c.a.createElement("span",null)),c.a.createElement("label",{htmlFor:this.id,className:"text-label"},this.props.children))}}]),t}(c.a.Component),G=(a(248),function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(f.a)(this,Object(b.a)(t).call(this))).state={open:e.defaultOpen||!1},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.children,r=t.title,n=t.className,s=this.state.open;return c.a.createElement("div",{className:S()("collapsible-bar",n,{open:s})},c.a.createElement("div",{className:"header",onClick:function(){return e.setState((function(e){return{open:!e.open}}))}},c.a.createElement("div",{className:"collapse-button"},c.a.createElement(R.f,null)),c.a.createElement("div",{className:"title"},r)),a&&c.a.createElement("div",{className:"collapsible-children"},a))}}]),t}(n.PureComponent)),H=a(123);function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function W(e){var t=e.range,a=e.min,r=e.max,n=e.onChange;return c.a.createElement(H.Range,{values:t,step:1,min:a,max:r,onChange:n,renderTrack:function(e){var n=e.props,s=e.children;return c.a.createElement("div",{onMouseDown:n.onMouseDown,onTouchStart:n.onTouchStart,style:V({},n.style,{position:"relative",height:"10px",display:"flex",width:"100%"})},c.a.createElement("div",{ref:n.ref,style:{height:"6px",width:"100%",borderRadius:"3px",background:Object(H.getTrackBackground)({values:t,colors:["#ccc","#88d3ff","#ccc"],min:a,max:r}),alignSelf:"center"}},s))},renderThumb:function(e){var t=e.props,a=e.isDragged;return c.a.createElement("div",Object.assign({},t,{style:V({},t.style,{height:"12px",width:"12px",borderRadius:"6px",backgroundColor:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0px 2px 3px #AAA"})}),c.a.createElement("div",{style:{height:"6px",width:"6px",borderRadius:"3px",backgroundColor:a?"#88d3ff":"#CCC"}}))}})}var z={DEFAULT:"default",PROTAGONIST:"protagonist",RANK_ASC:"rankAsc",RANK_DESC:"rankDesc",NEW_SCORES_PLAYER:"newScoresPlayer"},J=[1,28],Z={STD:"Standard",SHORT:"Short",REMIX:"Remix",FULL:"Full"},X=p.a.values(Z);function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Y(e){var t=e.filterValue,a=e.onChange,n=p.a.getOr(J,"range",t),s=p.a.getOr(null,"type",t),l=p.a.getOr(X,"duration",t),o="\u0444\u0438\u043b\u044c\u0442\u0440 \u0447\u0430\u0440\u0442\u043e\u0432";if(t){var i=s||"";o="\u0447\u0430\u0440\u0442\u044b: "+(o=n[0]===n[1]?"".concat(i).concat(n[0]):"".concat(i).concat(n[0]," - ").concat(i).concat(n[1])),p.a.isEqual(l,X)||(o+=" ***")}var u=function(e){a(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({range:n,type:s},e,{duration:p.a.isEmpty(e.duration)?l:e.duration}))};return c.a.createElement("div",null,c.a.createElement(M,{overlayClassName:"chart-range-overlay-outer",overlayItem:c.a.createElement("button",{className:"filter-charts-button btn btn-sm btn-dark"},o)},c.a.createElement("div",{className:"chart-range-overlay"},c.a.createElement("div",{className:"buttons"},c.a.createElement(_,{text:"Single",active:"S"===s,onToggle:function(e){u({type:e?"S":null})}}),c.a.createElement(_,{text:"Double",active:"D"===s,onToggle:function(e){u({type:e?"D":null})}})),c.a.createElement(W,{range:n,min:J[0],max:J[1],onChange:function(e){return u({range:e})}}),c.a.createElement("div",{className:"inputs"},c.a.createElement("button",{className:"btn btn-sm btn-dark",onClick:function(){return u({range:[Math.max(n[0]-1,J[0]),n[1]]})}},c.a.createElement(R.d,null)),c.a.createElement(K,{type:"number",className:"form-control",min:J[0],max:Math.min(J[1],n[1]),value:n[0],onBlur:function(e){u({range:[e,n[1]]})}}),c.a.createElement("button",{className:"btn btn-sm btn-dark",onClick:function(){var e=Math.min(n[0]+1,J[1]);u({range:[e,n[1]<e?e:n[1]]})}},c.a.createElement(R.e,null)),c.a.createElement("div",{className:"_flex-fill"}),c.a.createElement("button",{className:"btn btn-sm btn-dark",onClick:function(){var e=Math.max(n[1]-1,J[0]);u({range:[n[0]>e?e:n[0],e]})}},c.a.createElement(R.d,null)),c.a.createElement(K,{type:"number",className:"form-control",min:Math.max(J[0],n[0]),max:J[1],value:n[1],onBlur:function(e){return u({range:[n[0],e]})}}),c.a.createElement("button",{className:"btn btn-sm btn-dark",onClick:function(){return u({range:[n[0],Math.min(n[1]+1,J[1])]})}},c.a.createElement(R.e,null))),c.a.createElement("div",{className:"buttons-duration"},c.a.createElement(_,{text:"Standard",active:l.includes(Z.STD),onToggle:function(e){u({duration:e?[].concat(Object(O.a)(l),[Z.STD]):p.a.without([Z.STD],l)})}}),c.a.createElement(_,{text:"Short",active:l.includes(Z.SHORT),onToggle:function(e){u({duration:e?[].concat(Object(O.a)(l),[Z.SHORT]):p.a.without([Z.SHORT],l)})}}),c.a.createElement(_,{text:"Remix",active:l.includes(Z.REMIX),onToggle:function(e){u({duration:e?[].concat(Object(O.a)(l),[Z.REMIX]):p.a.without([Z.REMIX],l)})}}),c.a.createElement(_,{text:"Full",active:l.includes(Z.FULL),onToggle:function(e){u({duration:e?[].concat(Object(O.a)(l),[Z.FULL]):p.a.without([Z.FULL],l)})}})))))}var $=a(28),ee=a.n($),te=a(42),ae=a(22),re=function(){var e=Object(te.a)(ee.a.mark((function e(t){var a,r,n;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,e.prev=1,e.next=4,fetch(a);case 4:if(!((r=e.sent).status>=200&&r.status<300)){e.next=12;break}return e.next=8,r.json();case 8:return n=e.sent,e.abrupt("return",n);case 12:throw Error("HTTP Status "+r.status);case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",Promise.reject(e.t0));case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),ne={F:.1,D:.2,"D+":.3,C:.3,"C+":.5,B:.5,"B+":.8,A:.8,"A+":1,S:1.1,SS:1.2,SSS:1.2},ce=function(e,t){return e.isBestGradeOnChart?"COOP"===t.chartType?1e3*t.chartLevel*(ne[e.grade]||.8)/8:Math.pow(t.chartLevel,2.31)*(ne[e.grade]||.8)/9:0},se=function(e){return c.a.createElement("img",{className:e.color,src:"".concat(".","/ranks/").concat(e.iconName),alt:e.threshold})},le=[{threshold:0,iconName:"0.png",color:"bronze"},{threshold:1e3,iconName:"1.png",color:"bronze"},{threshold:2e3,iconName:"2.png",color:"bronze"},{threshold:3e3,iconName:"3.png",color:"bronze"},{threshold:4e3,iconName:"4.png",color:"bronze"},{threshold:5e3,iconName:"5.png",color:"bronze"},{threshold:6250,iconName:"6.png",color:"bronze"},{threshold:7500,iconName:"7.png",color:"bronze"},{threshold:8750,iconName:"8.png",color:"bronze"},{threshold:1e4,iconName:"9.png",color:"silver"},{threshold:12e3,iconName:"10.png",color:"silver"},{threshold:14e3,iconName:"11.png",color:"silver"},{threshold:16e3,iconName:"12.png",color:"silver"},{threshold:18e3,iconName:"13.png",color:"silver"},{threshold:22e3,iconName:"14.png",color:"silver"},{threshold:26e3,iconName:"15.png",color:"silver"},{threshold:3e4,iconName:"16.png",color:"silver"},{threshold:35e3,iconName:"17.png",color:"silver"},{threshold:4e4,iconName:"18.png",color:"gold"},{threshold:5e4,iconName:"19.png",color:"gold"},{threshold:6e4,iconName:"20.png",color:"gold"},{threshold:7e4,iconName:"21.png",color:"gold"},{threshold:8e4,iconName:"22.png",color:"gold"},{threshold:1e5,iconName:"23.png",color:"gold"},{threshold:12e4,iconName:"24.png",color:"gold"},{threshold:14e4,iconName:"25.png",color:"gold"},{threshold:16e4,iconName:"26.png",color:"gold"}],oe=a(30),ie={"500 \u043a\u043e\u043c\u0431\u043e":{icon:oe.e,description:"\u0417\u0430\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c 500+ \u043a\u043e\u043c\u0431\u043e \u043d\u0430 \u043b\u044e\u0431\u043e\u043c \u0447\u0430\u0440\u0442\u0435",resultFunction:function(e,t,a){return{progress:100===a.progress?100:e.combo>=500?100:0}}},"1000 \u043a\u043e\u043c\u0431\u043e":{icon:oe.f,description:"\u0417\u0430\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c 1000+ \u043a\u043e\u043c\u0431\u043e \u043d\u0430 \u043b\u044e\u0431\u043e\u043c \u0447\u0430\u0440\u0442\u0435",resultFunction:function(e,t,a){return{progress:100===a.progress?100:e.combo>=1e3?100:0}}},"2000 \u043a\u043e\u043c\u0431\u043e":{icon:oe.g,description:"\u0417\u0430\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c 2000+ \u043a\u043e\u043c\u0431\u043e \u043d\u0430 \u043b\u044e\u0431\u043e\u043c \u0447\u0430\u0440\u0442\u0435",resultFunction:function(e,t,a){return{progress:100===a.progress?100:e.combo>=2e3?100:0}}},"\u041c\u0430\u0441\u0442\u0435\u0440 \u0444\u0438\u043d\u0433\u0435\u0440\u0438\u043d\u0433\u0430":{icon:oe.i,description:"\u0421\u044b\u0433\u0440\u0430\u0442\u044c \u0432\u0441\u0435 Fingers \u0442\u0440\u0435\u043a\u0438",initialState:{progress:0,playedSongs:[],songsToPlay:["Monkey Fingers","Kimchi Fingers","Monkey Fingers 2","Money Fingers"]},resultFunction:function(e,t,a){var r=a.songsToPlay.includes(t.song)?p.a.uniq([].concat(Object(O.a)(a.playedSongs),[t.song])):a.playedSongs;return{playedSongs:r,songsToPlay:a.songsToPlay,progress:100*r.length/a.songsToPlay.length}}},"8-bit":{icon:oe.h,description:"\u0421\u044b\u0433\u0440\u0430\u0442\u044c Seize My Day, Tales of Pumpnia \u0438 Pumptris (8bit ver.)",initialState:{progress:0,playedSongs:[],songsToPlay:["Seize My Day","Tales of Pumpnia","Pumptris (8bit ver.)"]},resultFunction:function(e,t,a){var r=a.songsToPlay.includes(t.song)?p.a.uniq([].concat(Object(O.a)(a.playedSongs),[t.song])):a.playedSongs;return{playedSongs:r,songsToPlay:a.songsToPlay,progress:100*r.length/a.songsToPlay.length}}},"Love is...":{icon:oe.b,description:"\u0421\u044b\u0433\u0440\u0430\u0442\u044c \u0432\u0441\u0435 Love is a Danger Zone \u0442\u0440\u0435\u043a\u0438",initialState:{progress:0,playedSongs:[],songsToPlay:["Love is a Danger Zone","Love is a Danger Zone [SHORT]","Love is a Danger Zone (Cranky Mix)","Love is a Danger Zone 2","Love is a Danger Zone 2 [SHORT]","Love is a Danger Zone 2 [FULL]","Love is a Danger Zone 2 (D&G Ver.)","Love is a Danger Zone (try to B.P.M.)"]},resultFunction:function(e,t,a){var r=a.songsToPlay.includes(t.song)?p.a.uniq([].concat(Object(O.a)(a.playedSongs),[t.song])):a.playedSongs;return{playedSongs:r,songsToPlay:a.songsToPlay,progress:100*r.length/a.songsToPlay.length}}},"\u0423\u043b\u0438\u0442\u043a\u0430":{icon:oe.j,description:"\u041c\u0430\u0441\u0442\u0435\u0440 \u0437\u0430\u043c\u0435\u0434\u043b\u0435\u043d\u0438\u0439: \u0441\u044b\u0433\u0440\u0430\u0442\u044c \u0441\u0442\u0430\u0440\u0448\u0438\u0435 \u0447\u0430\u0440\u0442\u044b Twist of Fate, Karyawisata, Awakening \u0438 Moonlight",initialState:{progress:0,playedSongs:[],songsToPlay:[{song:"Twist of Fate (feat. Ruriling)",charts:["D20","S19"]},{song:"Karyawisata",charts:["S20","D16"]},{song:"Awakening",charts:["S19","D20"]},{song:"Moonlight",charts:["S19","D21"]}]},resultFunction:function(e,t,a){var r=a.songsToPlay.some((function(e){return t.song===e.song&&e.charts.includes(t.chartLabel)}))?p.a.uniq([].concat(Object(O.a)(a.playedSongs),[t.song])):a.playedSongs;return{playedSongs:r,songsToPlay:a.songsToPlay,progress:100*r.length/a.songsToPlay.length}}},"\u041a\u043e\u0440\u0438\u0447\u043d\u0435\u0432\u0430\u044f S":{icon:oe.c,description:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c S, \u043d\u043e 5+ \u0431\u044d\u0434\u043e\u0432",resultFunction:function(e,t,a){return{progress:100===a.progress?100:0===e.miss&&e.bad>=5?100:0}}},"\u041c\u044b \u0432\u044b\u0436\u0438\u0432\u0430\u043b\u0438 \u043a\u0430\u043a \u043c\u043e\u0433\u043b\u0438":{icon:oe.a,description:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c B \u0438\u043b\u0438 \u043d\u0438\u0436\u0435, \u043d\u043e \u0443\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043b\u0430\u0439\u0444\u0431\u0430\u0440",resultFunction:function(e,t,a){return{progress:100===a.progress?100:["B+","C+","D+"].includes(e.grade)?100:0}}},"\u041f\u0430\u0434\u043e\u0432\u044b\u0439 \u043c\u0438\u0441\u0441":{icon:oe.k,description:"\u041a\u043e\u0433\u0434\u0430 \u043e\u0442 SSS \u0442\u0435\u0431\u044f \u0443\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u043c\u0438\u0441\u0441\u044b \u0438\u0437-\u0437\u0430 \u043f\u043b\u043e\u0445\u043e\u0433\u043e \u043c\u043e\u0434\u0434\u0438\u043d\u0433\u0430 \u043f\u0430\u0434\u043e\u0432",resultFunction:function(e,t,a){return{progress:100===a.progress?100:e.miss>0&&0===e.bad&&0===e.good&&0===e.great?100:0}}}},ue={progress:0};localStorage&&(window.debugOn=function(){localStorage.setItem("debug",1)},window.debugOff=function(){localStorage.removeItem("debug")});var me=localStorage&&localStorage.getItem("debug");function de(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function pe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?de(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):de(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ge="RANKINGS/SET_RANKINGS",he="RANKINGS/RANKING_CHANGE_SET";p.a.map("id"),p.a.flow(p.a.map((function(e){return[e.id,e.rating]})),p.a.fromPairs);function fe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function be(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ve="PROFILES/SET_PROFILES",Ee="PROFILES/SET_FILTER",ye="PROFILES/RESET_FILTER",Oe={},Ne={isLoading:!1,data:[],filter:Oe};var ke=function(e,t){return p.a.mapValues((function(e){var a=["A","A+","S","SS","SSS"];e.expRank=p.a.findLast((function(t){return t.threshold<=e.exp}),le),e.expRankNext=p.a.find((function(t){return t.threshold>e.exp}),le),e.progress={double:{SS:{},S:{},"A+":{},A:{}},single:{SS:{},S:{},"A+":{},A:{}}};var r={SSS:["SS","S","A+","A"],SS:["SS","S","A+","A"],S:["S","A+","A"],"A+":["A+","A"],A:["A"]};return p.a.keys(e.resultsByLevel).forEach((function(t){e.resultsByLevel[t].forEach((function(n){var c=n.result.grade,s=n.result.playerId,l=n.chart.results.filter((function(e){return e.playerId===s}));if(l.length>1&&l.sort((function(e,t){return a.indexOf(t.grade)-a.indexOf(e.grade)}))[0].grade!==c)return;var o=r[c];o&&o.forEach((function(a){!function(t,a,r){var n="S"===r||"SP"===r?e.progress.single:"D"===r||"DP"===r?e.progress.double:null;n&&(n[a][t]=n[a][t]?n[a][t]+1:1)}(t,a,n.chart.chartType)}))}))})),["single","double"].forEach((function(a){e.progress["".concat(a,"-bonus")]=0,p.a.keys(e.progress[a]).forEach((function(r){e.progress[a]["".concat(r,"-bonus")]=0,p.a.keys(e.progress[a][r]).forEach((function(n){var c=e.progress[a][r][n],s=function(e){return Math.round(Math.min(e,1+e/20+.7*Math.sqrt(Math.max(e-1,0))))}(t.data["".concat(a,"sLevels")][n]),l=Math.min(1,c/s),o=function(e){return 30*(1+Math.pow(2,e/4))/11}(n)*l;e.progress[a][r]["".concat(n,"-bonus")]=o,e.progress[a][r]["".concat(n,"-bonus-coef")]=l,e.progress[a][r]["".concat(n,"-min-number")]=s,e.progress[a][r]["".concat(n,"-achieved-number")]=c,o>=e.progress[a]["".concat(r,"-bonus")]&&(e.progress[a]["".concat(r,"-bonus")]=o,e.progress[a]["".concat(r,"-bonus-level")]=n,e.progress[a]["".concat(r,"-bonus-level-coef")]=l,e.progress[a]["".concat(r,"-bonus-level-min-number")]=s,e.progress[a]["".concat(r,"-bonus-level-achieved-number")]=c)})),e.progress["".concat(a,"-bonus")]+=e.progress[a]["".concat(r,"-bonus")]}))})),e.progress.bonus=e.progress["double-bonus"]+e.progress["single-bonus"],e.rating=850+e.progress.bonus,e.accuracy=e.countAcc>0?Math.round(e.sumAccuracy/e.countAcc*100)/100:null,e}),e)},Se="https://vps720616.ovh.net:5000";function je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Pe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?je(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):je(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var we="TOP/LOADING",xe="TOP/SUCCESS",Re="TOP/ERROR",Ce="TOP/SET_FILTER",De="TOP/RESET_FILTER",Ie="TOP/RANKING_CHANGE_SET",Ae={showRank:!0,showRankAndNorank:!0},Le={isLoading:!1,data:[],filter:Ae,players:{},profiles:{},results:[],sharedCharts:{}},Fe={"?":0,F:1,D:2,"D+":3,C:4,"C+":5,B:6,"B+":7,A:8,"A+":9,S:10,SS:11,SSS:12},Te=function(e,t,a){if("undefined"===typeof e.recognition_notes)return{isUnknownPlayer:"PUMPITUP"===t[e.player].arcade_name,isIntermediateResult:!0,sharedChartId:e.shared_chart,playerId:e.player,nickname:t[e.player].nickname,nicknameArcade:t[e.player].arcade_name,date:e.gained,dateObject:new Date(e.gained),grade:e.grade,isExactDate:!!e.exact_gain_date,score:e.score,isRank:!!e.rank_mode};var r,n={isUnknownPlayer:"PUMPITUP"===t[e.player].arcade_name,isIntermediateResult:!1,sharedChartId:e.shared_chart,id:e.id,playerId:e.player,nickname:t[e.player].nickname,nicknameArcade:t[e.player].arcade_name,originalChartMix:e.original_mix,originalChartLabel:e.original_label,originalScore:e.original_score,date:e.gained,dateObject:new Date(e.gained),grade:"?"!==e.grade?e.grade:(r=e,0===r.misses&&0===r.bads&&0===r.goods?0===r.greats?"SSS":"SS":r.grade),isExactDate:!!e.exact_gain_date,score:e.score,scoreIncrease:e.score_increase,calories:e.calories&&e.calories/1e3,perfect:e.perfects,great:e.greats,good:e.goods,bad:e.bads,miss:e.misses,combo:e.max_combo,mods:e.mods_list,isRank:!!e.rank_mode,isHJ:(e.mods_list||"").split(" ").includes("HJ"),isMachineBest:"machine_best"===e.recognition_notes,isMyBest:"personal_best"===e.recognition_notes};!function(e,t){if(t){for(var a=[e.perfect,e.great,e.good,e.bad,e.miss],r=-1,n=0,c=0,s=0;s<5;++s)p.a.isNumber(a[s])?c+=a[s]:(r=s,n++);1===n&&(e[["perfect","great","good","bad","miss"][r]]=t-c)}}(n,a.maxTotalSteps);var c=10*Math.sqrt(n.perfect),s=c?Math.floor((100*c+60*n.great+30*n.good+-20*n.miss)/(c+n.great+n.good+n.bad+n.miss)*100)/100:null,l=n.perfect?Math.floor((100*n.perfect+60*n.great+30*n.good+-20*n.miss)/(n.perfect+n.great+n.good+n.bad+n.miss)*100)/100:null;return n.accuracy=s<0?0:100===l?100:s&&+s.toFixed(2),n.accuracyRaw=l,n},Me=function(e,t){var a=e.playerId,r=p.a.fromPairs(Array.from({length:28}).map((function(e,t){return[t+1,[]]})));t[a]={name:e.nickname,nameArcade:e.nicknameArcade,resultsByGrade:{},resultsByLevel:r,lastResultDate:e.dateObject,count:0,battleCount:0,countAcc:0,grades:{F:0,D:0,C:0,B:0,A:0,S:0,SS:0,SSS:0},sumAccuracy:0,rankingHistory:[],ratingHistory:[],lastPlace:null,lastBattleDate:0},t[a].achievements=p.a.flow(p.a.keys,p.a.map((function(e){return[e,Pe({},ie[e].initialState||ue)]})),p.a.fromPairs)(ie),t[a].exp=0},_e=function(e,t,a){var r=a[e.playerId];r.count++,e.accuracy&&(r.countAcc++,r.sumAccuracy+=e.accuracy),r.grades[e.grade.replace("+","")]++,"COOP"!==t.chartType&&e.isBestGradeOnChart&&(r.resultsByGrade[e.grade]=[].concat(Object(O.a)(r.resultsByGrade[e.grade]||[]),[{result:e,chart:t}]),r.resultsByLevel[t.chartLevel]=[].concat(Object(O.a)(r.resultsByLevel[t.chartLevel]||[]),[{result:e,chart:t}])),e.isExactDate&&r.lastResultDate<e.dateObject&&(r.lastResultDate=e.dateObject),r.achievements=p.a.mapValues.convert({cap:!1})((function(a,n){return ie[n].resultFunction(e,t,a,r)}),r.achievements),r.exp+=ce(e,t)},Be=function(e,t){var a=e.players,r=e.results,n=e.shared_charts,c=[],s={},l={},o={},i=[],u={},m=!0,d=!1,g=void 0;try{for(var h,f=function(){var e=h.value,t=e.shared_chart;if(!o[t]){var r=n[t],u=p.a.toUpper(r.chart_label),m=u.match(/(\D+)|(\d+)/g),d=Object(ae.a)(m,2),g=d[0],f=d[1];o[t]={song:r.track_name,chartLabel:u,chartLevel:f,chartType:g,duration:r.duration,sharedChartId:t,maxTotalSteps:r.max_total_steps,results:[],totalResultsCount:0}}var b=o[t],v=Te(e,a,b);c.push(v);var E,y=function(e){return"".concat(e.sharedChartId,"-").concat(e.playerId,"-").concat(e.isRank)}(v),O=s[y];if(!O||O.score<v.score){var N=-1;O&&(N=b.results.indexOf(O),b.results.splice(N,1));var k=p.a.sortedLastIndexBy((function(e){return-e.score}),v,b.results);b.results.splice(k,0,v),b.latestScoreDate=v.date,b.totalResultsCount++,s[y]=v,b.results.forEach((function(e){v.isUnknownPlayer||e.isUnknownPlayer||e.isRank!==v.isRank||e.playerId===v.playerId||i.push([v,e,b])})),!b.maxScore&&(E=v,p.a.isInteger(E.perfect)&&p.a.isInteger(E.great)&&p.a.isInteger(E.good)&&p.a.isInteger(E.bad)&&p.a.isInteger(E.miss)&&p.a.isInteger(E.score))&&(b.maxScore=function(e){return e.score/e.accuracyRaw*100/(e.isRank?1.2:1)}(v),b.maxScoreAccuracy=v.accuracyRaw)}if(!v.isIntermediateResult){var S=function(e){return"".concat(e.sharedChartId,"-").concat(e.playerId)}(v),j=l[S];(!j||Fe[j.grade]<=Fe[v.grade])&&(j&&(j.isBestGradeOnChart=!1),v.isBestGradeOnChart=!0,l[S]=v)}},b=r[Symbol.iterator]();!(m=(h=b.next()).done);m=!0)f()}catch(S){d=!0,g=S}finally{try{m||null==b.return||b.return()}finally{if(d)throw g}}for(var v=p.a.orderBy(["latestScoreDate","song","chartLevel"],["desc","asc","desc"],p.a.values(o)),E=0,y=c;E<y.length;E++){var N=y[E],k=o[N.sharedChartId];N.isUnknownPlayer||N.isIntermediateResult||(u[N.playerId]||Me(N,u),_e(N,k,u))}return u=ke(u,t),function(e){var t=e.battles,a=e.profiles,r={},n=function(e,t){return"".concat(e.playerId,"vs").concat(t.playerId,"-").concat(e.sharedChartId,"-").concat(e.isRank)},c={},s=function(e){return"".concat(e.playerId,"-").concat(e.sharedChartId,"-").concat(e.isRank)};t.forEach((function(e){var t=Object(ae.a)(e,3),l=t[0],o=t[1],i=t[2],u=a[l.playerId],m=a[o.playerId],d=l.isRank?1.2:1,g=null;i.maxScore&&(g=i.maxScore*d,Math.max(g,l.score,o.score)===g||l.isRank||l.isExactDate&&o.isExactDate||(g*=1.2),Math.max(g,l.score,o.score)!==g&&(g=Math.max.apply(Math,Object(O.a)(p.a.map("score",i.results))))),l.startingRating||(l.startingRating=u.rating),o.startingRating||(o.startingRating=m.rating),u.battleCount++,m.battleCount++;var h,f,b=u.rating,v=m.rating,E=Math.pow(10,b/400),y=Math.pow(10,v/400),N=E/(E+y),k=y/(E+y),S=l.score,j=o.score;S===j?h=f=.5:g&&0!==S&&0!==j?(h=5*((j=g/j-1)/((S=g/S-1)+j)-.5)+.5,f=5*(S/(S+j)-.5)+.5):f=1-(h=S>j?1:j<S?0:.5),h=Math.max(0,Math.min(1,h)),f=Math.max(0,Math.min(1,f));var P=Math.max(0,Math.min(1,(b-700)/800)),w=Math.max(0,Math.min(1,(v-700)/800)),x=30+20*P,R=30+20*w,C=Math.max(1,Math.min(x,Math.pow(i.chartLevel/25,5*(P-.5)+2.5)*x)),D=Math.max(1,Math.min(R,Math.pow(i.chartLevel/25,5*(w-.5)+2.5)*R)),I=Math.min(C,D),A=1;i.maxScore&&l.grade.startsWith("SS")&&o.grade.startsWith("SS")&&l.score/g>.99&&o.score/g>.99&&(A=Math.min(1,Math.max(100-100*l.score/g,100-100*o.score/g)));var L=I*A,F=I*A,T=L*(h-N),M=F*(f-k);T=T<0&&"SSS"===l.grade?0:T,M=M<0&&"SSS"===o.grade?0:M;var _=n(l,o),B=n(o,l),K=r[_]||0,q=r[B]||0;r[_]=T,r[B]=M,u.rating=u.rating+T-K,m.rating=m.rating+M-q;var G=s(l),H=s(o);c[G]=(c[G]||0)+T-K,c[H]=(c[H]||0)+M-q,l.ratingDiff=c[G],l.ratingDiffLast=T-K,o.ratingDiff=c[H],o.ratingDiffLast=M-q,me&&console.log("".concat(i.chartLabel," - ").concat(i.song," (").concat(i.sharedChartId,") - ").concat(a[l.playerId].name," / ").concat(a[o.playerId].name,"\n- ").concat(l.score," / ").concat(o.score," (").concat(g,") - R ").concat(h.toFixed(2),"/").concat(f.toFixed(2)," E ").concat(N.toFixed(2)," / ").concat(k.toFixed(2),"\n- Rating ").concat(b.toFixed(2)," / ").concat(v.toFixed(2)," - ").concat(T.toFixed(2)," / ").concat(M.toFixed(2)," - K ").concat(L.toFixed(2)," ").concat(F.toFixed(2),"\n- Base elo: ").concat(K.toFixed(2)," / ").concat(q.toFixed(2),"\n- Elo change: ").concat((T-K).toFixed(2)," / ").concat((M-q).toFixed(2),"\n- New base elo: ").concat(r[_].toFixed(2)," / ").concat(r[B].toFixed(2),"\n- RD: ").concat(c[G].toFixed(2)," / ").concat(c[H].toFixed(2))),u.rating=Math.max(100,u.rating),m.rating=Math.max(100,m.rating);var U=p.a.flow(p.a.keys,p.a.map((function(e){return{id:e,rating:a[e].rating}})),p.a.orderBy(["rating"],["desc"]))(a),V=l.dateObject>o.dateObject?l.dateObject:o.dateObject;U.forEach((function(e,t){a[e.id].lastPlace!==t+1&&(a[e.id].rankingHistory.push({place:t+1,date:V.getTime()}),a[e.id].lastPlace=t+1)}));var W=p.a.last(u.ratingHistory),z=p.a.last(m.ratingHistory);W!==u.rating&&u.ratingHistory.push({rating:u.rating,date:V.getTime()}),z!==m.rating&&m.ratingHistory.push({rating:m.rating,date:V.getTime()})})),p.a.flow(p.a.keys,p.a.forEach((function(e){a[e].id=p.a.toInteger(e),a[e].accuracy=a[e].countAcc>0?Math.round(a[e].sumAccuracy/a[e].countAcc*100)/100:null,a[e].ratingRaw=a[e].rating,a[e].rating=Math.round(a[e].rating),a[e].rankingHistory=[].concat(Object(O.a)(a[e].rankingHistory),[{place:p.a.get("place",p.a.last(a[e].rankingHistory)),date:Date.now()}])})))(a)}({battles:i,profiles:u}),{sortedSongs:v,mappedResults:c,profiles:u,sharedCharts:o}};var Ke=function(){return function(){var e=Object(te.a)(ee.a.mark((function e(t,a){var r,n,c,s,l,o,i,u;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:we}),e.prev=1,e.next=4,re({url:"".concat(Se,"/results/highscores")});case 4:if(!(r=e.sent).error){e.next=7;break}throw new Error(r.error);case 7:n=a(),c=n.tracklist,s=Be(r,c),l=s.sortedSongs,o=s.sharedCharts,i=s.mappedResults,u=s.profiles,t({type:xe,data:l,players:p.a.flow(p.a.toPairs,p.a.map((function(e){var t=Object(ae.a)(e,2),a=t[0];return Pe({},t[1],{id:p.a.toInteger(a)})})))(r.players),results:i,profiles:u,sharedCharts:o}),t(Ue(u)),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0),t({type:Re,error:e.t0});case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,a){return e.apply(this,arguments)}}()},qe=function(e){return{type:Ce,filter:e}},Ge=p.a.map("id"),He=p.a.flow(p.a.map((function(e){return[e.id,e.rating]})),p.a.fromPairs),Ue=function(e){return function(){var t=Object(te.a)(ee.a.mark((function t(a,r){var n,c,s,l,o,i,u,d,g,h,f,b,v,E;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=p.a.orderBy("ratingRaw","desc",p.a.values(e)),t.next=4,Promise.all([m.a.getItem("lastChangedRanking_v3"),m.a.getItem("lastChangedRankingPoints_v3"),m.a.getItem("lastFetchedRanking_v3")]);case 4:c=t.sent,s=Object(ae.a)(c,3),l=s[0],o=s[1],i=s[2],u=Ge(n),d=Ge(i),g=Ge(l),h=He(n),f=He(i),b=He(o),v=b,p.a.isEqual(h,f)||(m.a.setItem("lastChangedRankingPoints_v3",i),v=f),E=g,p.a.isEqual(u,d)||(m.a.setItem("lastChangedRanking_v3",i),E=d),a({type:Ie,listNow:u,listPrev:E,rankingsPointsMap:v}),m.a.setItem("lastFetchedRanking_v3",n),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(0),console.warn("Cannot get ranking from local storage",t.t0);case 26:case"end":return t.stop()}}),t,null,[[0,23]])})));return function(e,a){return t.apply(this,arguments)}}()};function Ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function We(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ve(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ze="PRESETS/SELECT_PRESET",Je="PRESETS/LOAD_PRESETS",Ze="PRESETS/LOADING_START",Xe="PRESETS/LOADING_END",Qe={presets:[],currentPreset:null,isLoading:!1},Ye=function(e){return e&&We({},e,{label:e.name,value:e.name})};var $e=function(e){return{type:Je,presets:e||[]}},et=function(){return{type:Ze}},tt=function(){return{type:Xe}},at=function(e){return{type:ze,currentPreset:e}},rt=function(){return function(e,t){e(et());var a=t().presets.currentPreset,r=p.a.get("name",a);return m.a.getItem("filterPresets").then((function(t){r&&p.a.find({name:r},t)?(e(at(a)),e(qe(a.filter))):e($e(t)),e(tt())}))}};function nt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var ct=c.a.createElement("button",{className:"btn btn-sm btn-dark btn-icon _margin-right"},c.a.createElement(R.j,null),"\u043f\u0440\u0435\u0441\u0435\u0442\u044b"),st=function(){return"\u043f\u0443\u0441\u0442\u043e"},lt={loadPresets:function(){return function(e,t){return e(et()),m.a.getItem("filterPresets").then((function(t){e($e(t)),e(tt())}))}},savePreset:function(e){return function(t,a){return t(et()),m.a.getItem("filterPresets").then((function(r){var n=a().top.filter,c={name:e,filter:n};if(p.a.some({name:e},r)){if(window.confirm("Preset with this name already exists, replace it?")){var s=p.a.remove({name:e},r),l=[].concat(Object(O.a)(s),[c]);t($e(l)),m.a.setItem("filterPresets",l)}}else{var o=[].concat(Object(O.a)(r||[]),[c]);t($e(o)),t(at(c)),m.a.setItem("filterPresets",o)}t(tt())}))}},openPreset:rt,deletePreset:function(){return function(e,t){e(et());var a=p.a.get("name",t().presets.currentPreset);return m.a.getItem("filterPresets").then((function(t){if(p.a.find({name:a},t)&&window.confirm("Are you sure you want to delete selected preset?")){var r=p.a.remove({name:a},t);e($e(r)),m.a.setItem("filterPresets",r)}else e($e(t));e(tt())}))}},selectPreset:at},ot=function(e){function t(){var e,a;Object(g.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(n)))).state={},a.onChangeSelection=function(e){a.props.selectPreset(e.name)},a.onRewritePreset=function(){var e=a.props.currentPreset;a.props.savePreset(e.name)},a.onSavePreset=function(){var e=a.state.name;a.props.savePreset(e),a.setState({isAddingNew:!1})},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.loadPresets()}},{key:"render",value:function(){var e=this,t=this.props,a=t.presets,r=t.currentPreset,n=t.isLoading,s=this.state,l=s.name,o=s.isAddingNew;return c.a.createElement("div",null,c.a.createElement(M,{overlayItem:ct},c.a.createElement("div",{className:"presets-control-overlay"},c.a.createElement(N.a,{className:"select _margin-bottom",classNamePrefix:"select",placeholder:"\u043f\u0440\u0435\u0441\u0435\u0442\u044b...",options:a,value:r,onChange:this.props.selectPreset,noOptionsMessage:st}),r&&c.a.createElement("div",{className:"buttons-presets _margin-bottom"},c.a.createElement("div",{className:"_flex-fill"}),c.a.createElement("button",{className:"btn btn-sm btn-dark btn-icon _margin-right",onClick:this.props.openPreset,disabled:n},c.a.createElement(R.h,null)," \u043e\u0442\u043a\u0440\u044b\u0442\u044c"),c.a.createElement("button",{className:"btn btn-sm btn-dark btn-icon _margin-right",onClick:this.onRewritePreset,disabled:n},c.a.createElement(R.o,null)," \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c"),c.a.createElement("button",{className:"btn btn-sm btn-dark btn-icon",onClick:this.props.deletePreset,disabled:n},c.a.createElement(R.r,null)," \u0443\u0434\u0430\u043b\u0438\u0442\u044c")),!o&&c.a.createElement("div",{className:"buttons-presets _margin-bottom"},c.a.createElement("div",{className:"_flex-fill"}),c.a.createElement("button",{className:"btn btn-sm btn-dark btn-icon _margin-left _self-align-end",onClick:function(){return e.setState({isAddingNew:!0})},disabled:n},c.a.createElement(R.l,null)," \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c")),o&&c.a.createElement("div",{className:"adding-new _margin-bottom"},c.a.createElement(K,{value:l,placeholder:"\u0438\u043c\u044f \u043f\u0440\u0435\u0441\u0435\u0442\u0430...",className:"form-control",onChange:function(t){return e.setState({name:t})}}),c.a.createElement("button",{className:"btn btn-sm btn-dark btn-icon _margin-left",onClick:this.onSavePreset,disabled:!l||n},c.a.createElement(R.o,null)," \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),c.a.createElement("button",{className:"btn btn-sm btn-dark btn-icon _margin-left",onClick:function(){return e.setState({isAddingNew:!1})},disabled:n},"\u043e\u0442\u043c\u0435\u043d\u0430")))))}}]),t}(c.a.Component),it=Object(i.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.presets)}),lt)(ot),ut=a(456),mt=a(184),dt=a.n(mt),pt=a(455),gt=a(51),ht=a.n(gt);ut.a.addLocale(dt.a);var ft=new ut.a("ru-RU"),bt={flavour:"long",gradation:pt.a,units:["day","week","month"]},vt=function(e){return c.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"}},c.a.createElement("div",null,"\u0442\u043e\u0447\u043d\u0430\u044f \u0434\u0430\u0442\u0430 \u0432\u0437\u044f\u0442\u0438\u044f \u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430"),c.a.createElement("div",null,"\u0441\u043a\u043e\u0440 \u0431\u044b\u043b \u0437\u0430\u043f\u0438\u0441\u0430\u043d \u0441 my best \u0438\u043b\u0438 machine best"),c.a.createElement("div",null,"\u0434\u0430\u0442\u0430 \u0437\u0430\u043f\u0438\u0441\u0438: ",e.toLocaleDateString()))},Et=function(e){var t=ht()().startOf("day").diff(ht()(e).startOf("day"),"days");return 0===t?"\u0441\u0435\u0433\u043e\u0434\u043d\u044f":1===t?"\u0432\u0447\u0435\u0440\u0430":ft.format(e,bt)},yt=["#4DB3FF","#80B300","#FF6655","#FF99E6","#33FFCC","#e633c8","#dbe812","#FF1A66","#991AFF","#E6B333","#1AB399","#4D8066","#CC9999","#00E680","#809980","#E6FF80","#1AFF33","#999933","#E6331A","#CCCC00","#66E64D","#4D80CC","#9900B3","#4DB380","#FF4D4D"],Ot=a(54),Nt=a(185);function kt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function St(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):kt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var jt=Object(Ot.a)((function(e){return e.results.players}),p.a.flow(p.a.toPairs,p.a.map((function(e){var t=Object(ae.a)(e,2),a=(t[0],t[1]),r=a.nickname,n=a.arcade_name;return{label:"".concat(r," (").concat(n,")"),value:r}})),p.a.sortBy((function(e){return p.a.toLower(e.label)})))),Pt=Object(Ot.a)((function(e){return e.results.data}),(function(e){return e.results.filter}),(function(e,t){var a,n=p.a.map("value",t.players),c=p.a.map("value",t.playersOr),s=p.a.map("value",t.playersNot),l=p.a.get("value",t.sortingType),o=p.a.get("value",t.protagonist),i=p.a.map("value",t.excludeAntagonists),u=[p.a.orderBy(["latestScoreDate"],["desc"])],m=o?[p.a.orderBy([function(e){return p.a.max(p.a.map((function(e){return e.nickname===o?e.dateObject.getTime():0}),e.results))}],["desc"])]:u,d=[p.a.filter((function(e){return p.a.map("nickname",e.results).includes(o)})),p.a.map((function(e){var t=p.a.findIndex({nickname:o},e.results),a=e.results[t].score,r=p.a.flow([p.a.take(t),p.a.uniqBy("nickname"),p.a.remove((function(e){return i.includes(e.nickname)||e.score===a}))])(e.results);return St({},e,{distanceFromProtagonist:Math.sqrt(p.a.reduce((function(e,t){return e+Math.pow(t.score/a-.99,2)}),0,r))})})),p.a.orderBy(["distanceFromProtagonist"],["desc"])],g=function(e){return[p.a.filter((function(e){return p.a.map("nickname",e.results).includes(o)})),p.a.orderBy([function(t){return p.a.getOr("asc"===e?1/0:-1/0,"ratingDiff",p.a.find({nickname:o},t.results))}],[e])]},h=(a={},Object(r.a)(a,z.DEFAULT,u),Object(r.a)(a,z.NEW_SCORES_PLAYER,m),Object(r.a)(a,z.PROTAGONIST,d),Object(r.a)(a,z.RANK_ASC,g("asc")),Object(r.a)(a,z.RANK_DESC,g("desc")),a)[l]||u;return p.a.flow(p.a.compact([p.a.map((function(e){return St({},e,{results:e.results.filter((function(e,t){return!e.isUnknownPlayer||0===t}),e.results)})})),t.chartRange&&function(e){return function(e,t){var a=p.a.getOr(J,"range",e),r=p.a.getOr(null,"type",e),n=p.a.getOr(X,"duration",e);return p.a.filter((function(e){return!(n!==X&&!n.includes(e.duration))&&(e.chartLevel>=a[0]&&e.chartLevel<=a[1]&&(!r||e.chartType.startsWith(r)))}),t)}(t.chartRange,e)},!t.showRank&&p.a.map((function(e){return St({},e,{results:p.a.filter((function(e){return!e.isRank}),e.results)})})),t.showRank&&t.showOnlyRank&&p.a.map((function(e){return St({},e,{results:p.a.filter((function(e){return e.isRank}),e.results)})})),t.showRank&&!t.showOnlyRank&&!t.showRankAndNorank&&p.a.map((function(e){var t=[];return St({},e,{results:p.a.filter((function(e){var a=t.includes(e.nickname);return t.push(e.nickname),!a}),e.results)})})),(n.length||c.length||s.length)&&p.a.filter((function(e){var t=p.a.map("nickname",e.results);return(!n.length||p.a.every((function(e){return t.includes(e)}),n))&&(!c.length||p.a.some((function(e){return t.includes(e)}),c))&&(!s.length||!p.a.some((function(e){return t.includes(e)}),s))})),p.a.filter((function(e){return p.a.size(e.results)}))].concat(Object(O.a)(h),[t.song&&function(e){return Object(Nt.a)(e,t.song,{keys:["song"]})}])))(e)}));function wt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function xt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Rt=[{label:"\u043e\u0442 \u043d\u043e\u0432\u044b\u0445 \u0441\u043a\u043e\u0440\u043e\u0432",value:z.DEFAULT},{label:"\u043e\u0442 \u043d\u043e\u0432\u044b\u0445 \u0441\u043a\u043e\u0440\u043e\u0432 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u0438\u0433\u0440\u043e\u043a\u0430",value:z.NEW_SCORES_PLAYER},{label:"\u043e\u0442 \u0445\u0443\u0434\u0448\u0438\u0445 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432",value:z.RANK_ASC},{label:"\u043e\u0442 \u043b\u0443\u0447\u0448\u0438\u0445 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432",value:z.RANK_DESC}],Ct={fetchResults:Ke,setFilter:qe,resetFilter:function(){return{type:De}},selectPreset:at,openPreset:rt},Dt=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(c)))).state={showItemsCount:20,chartOverrides:{}},a.setFilter=p.a.curry((function(e,t){var n=xt({},a.props.filter,Object(r.a)({},e,t));a.props.setFilter(n),m.a.setItem("filter",n)})),a.resetFilter=function(){a.props.resetFilter(),a.setState({chartOverrides:{}}),m.a.setItem("filter",Ae)},a.onRefresh=function(){var e=a.props.isLoading;a.setState({chartOverrides:{}}),!e&&a.props.fetchResults()},a.onTypeSongName=p.a.debounce(300,(function(e){a.setFilter("song",e)})),a.onRedoLatestResult=function(e){var t=p.a.drop(1,a.state.chartOverrides[e.sharedChartId]);a.setState((function(a){return{chartOverrides:xt({},a.chartOverrides,Object(r.a)({},e.sharedChartId,1===p.a.size(t)?null:t))}}))},a.onUndoLatestResult=function(e){p.a.isEmpty(e.results)&&a.setState((function(t){return{chartOverrides:p.a.omit(e.sharedChartId,t.chartOverrides)}}));var t=p.a.findIndex({date:e.latestScoreDate},e.results);if(!(t<0)){var n=a.props.results,c=e.results[t],s=c.playerId,l=p.a.findLast((function(t){return t.playerId===s&&t.sharedChartId===e.sharedChartId&&t.isRank===c.isRank&&t.date<c.date}),n),o=p.a.orderBy("score","desc",p.a.compact(p.a.map((function(e){return e===c?l:e}),e.results))),i=p.a.maxBy("date",o),u=xt({},e,{latestScoreDate:i&&i.date,results:o});a.setState((function(t){return{chartOverrides:xt({},t.chartOverrides,Object(r.a)({},e.sharedChartId,[u].concat(Object(O.a)(t.chartOverrides[e.sharedChartId]||[e]))))}}))}},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"renderSimpleSearch",value:function(){var e=this.props,t=e.isLoading,a=e.filter;return c.a.createElement("div",{className:"simple-search"},c.a.createElement("div",{className:"song-name _margin-right _margin-bottom"},c.a.createElement(K,{value:a.song||"",placeholder:"\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0435\u0441\u043d\u0438...",className:"form-control",onChange:this.onTypeSongName})),c.a.createElement("div",{className:"chart-range _margin-right _margin-bottom"},c.a.createElement(Y,{filterValue:a.chartRange,onChange:this.setFilter("chartRange")})),c.a.createElement("div",{className:"_flex-fill"}),c.a.createElement("div",{className:"_flex-row _margin-bottom"},c.a.createElement(it,null),c.a.createElement("button",{className:"btn btn-sm btn-dark btn-icon _margin-right",onClick:this.resetFilter},c.a.createElement(R.n,null)," \u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u044b"),c.a.createElement("button",{disabled:t,className:"btn btn-sm btn-dark btn-icon",onClick:this.onRefresh},c.a.createElement(R.p,null)," \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c")))}},{key:"renderFilters",value:function(){var e=this,t=this.props,a=t.players,r=t.filter;return c.a.createElement("div",{className:"filters"},c.a.createElement("div",{className:"people-filters"},c.a.createElement("label",{className:"label"},"\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0447\u0430\u0440\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u044b\u0433\u0440\u0430\u043b:"),c.a.createElement("div",{className:"players-block"},c.a.createElement("div",{className:"_margin-right"},c.a.createElement("label",{className:"label"},"\u043a\u0430\u0436\u0434\u044b\u0439 \u0438\u0437 \u044d\u0442\u0438\u0445"),c.a.createElement(N.a,{closeMenuOnSelect:!1,className:"select players",classNamePrefix:"select",placeholder:"\u0438\u0433\u0440\u043e\u043a\u0438...",isMulti:!0,options:a,value:p.a.getOr(null,"players",r),onChange:this.setFilter("players")})),c.a.createElement("div",{className:"_margin-right"},c.a.createElement("label",{className:"label"},"\u0438 \u0445\u043e\u0442\u044c \u043e\u0434\u0438\u043d \u0438\u0437 \u044d\u0442\u0438\u0445"),c.a.createElement(N.a,{closeMenuOnSelect:!1,className:"select players",classNamePrefix:"select",placeholder:"\u0438\u0433\u0440\u043e\u043a\u0438...",isMulti:!0,options:a,value:p.a.getOr(null,"playersOr",r),onChange:this.setFilter("playersOr")})),c.a.createElement("div",{className:"_margin-right"},c.a.createElement("label",{className:"label"},"\u0438 \u043d\u0438\u043a\u0442\u043e \u0438\u0437 \u044d\u0442\u0438\u0445"),c.a.createElement(N.a,{closeMenuOnSelect:!1,className:"select players",classNamePrefix:"select",placeholder:"\u0438\u0433\u0440\u043e\u043a\u0438...",isMulti:!0,options:a,value:p.a.getOr(null,"playersNot",r),onChange:this.setFilter("playersNot")})))),c.a.createElement("div",null,c.a.createElement(q,{checked:p.a.getOr(!1,"showRank",r),onChange:this.setFilter("showRank")},"\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0441\u043a\u043e\u0440\u044b \u043d\u0430 \u0440\u0430\u043d\u043a\u0435")),p.a.get("showRank",r)&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement(q,{checked:p.a.getOr(!1,"showOnlyRank",r),onChange:function(t){e.setFilter("showOnlyRank",t),p.a.get("showRankAndNorank",r)&&e.setFilter("showRankAndNorank",!1)}},c.a.createElement("strong",null,"\u0442\u043e\u043b\u044c\u043a\u043e")," \u043d\u0430 \u0440\u0430\u043d\u043a\u0435")),c.a.createElement("div",null,c.a.createElement(q,{checked:p.a.getOr(!1,"showRankAndNorank",r),onChange:function(t){e.setFilter("showRankAndNorank",t),p.a.get("showOnlyRank",r)&&e.setFilter("showOnlyRank",!1)}},"\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043b\u0443\u0447\u0448\u0438\u0435 \u0441\u043a\u043e\u0440\u044b \u0441 \u0440\u0430\u043d\u043a\u043e\u043c \u0438 \u0431\u0435\u0437"))))}},{key:"renderSortings",value:function(){var e=this.props,t=e.players,a=e.filter;return c.a.createElement("div",{className:"sortings"},c.a.createElement("div",null,c.a.createElement("label",{className:"label"},"\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430:"),c.a.createElement(N.a,{placeholder:"\u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0443",className:"select",classNamePrefix:"select",isClearable:!1,options:Rt,value:p.a.getOr(Rt[0],"sortingType",a),onChange:this.setFilter("sortingType")})),[z.PROTAGONIST,z.RANK_ASC,z.RANK_DESC,z.NEW_SCORES_PLAYER].includes(p.a.get("sortingType.value",a))&&c.a.createElement("div",null,c.a.createElement("label",{className:"label"},"\u0438\u0433\u0440\u043e\u043a:"),c.a.createElement(N.a,{className:S()("select players",{"red-border":!p.a.get("protagonist",a)}),classNamePrefix:"select",placeholder:"\u0438\u0433\u0440\u043e\u043a\u0438...",options:t,value:p.a.getOr(null,"protagonist",a),onChange:this.setFilter("protagonist")})),[z.PROTAGONIST].includes(p.a.get("sortingType.value",a))&&c.a.createElement("div",null,c.a.createElement("label",{className:"label"},"\u043d\u0435 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u0432 \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0438:"),c.a.createElement(N.a,{closeMenuOnSelect:!1,className:"select players",classNamePrefix:"select",placeholder:"\u0438\u0433\u0440\u043e\u043a\u0438...",options:t,isMulti:!0,value:p.a.getOr([],"excludeAntagonists",a),onChange:this.setFilter("excludeAntagonists")})))}},{key:"render",value:function(){var e=this,t=this.props,a=t.isLoading,r=t.filteredData,n=t.error,s=t.filter,l=this.state,i=l.showItemsCount,u=l.chartOverrides,m=r.length>i,d=p.a.slice(0,i,r),g=[z.PROTAGONIST,z.RANK_ASC,z.RANK_DESC].includes(p.a.get("sortingType.value",s)),h=[z.PROTAGONIST,z.RANK_ASC,z.RANK_DESC,z.NEW_SCORES_PLAYER].includes(p.a.get("sortingType.value",s)),f=p.a.get("protagonist.value",s),b=p.a.slice(0,yt.length,p.a.uniq(p.a.compact([h&&f].concat(Object(O.a)(p.a.map("value",s.players)),Object(O.a)(p.a.map("value",s.playersOr))))));return c.a.createElement("div",{className:"leaderboard-page"},c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"search-block"},this.renderSimpleSearch(),c.a.createElement(G,{title:"\u0444\u0438\u043b\u044c\u0442\u0440\u044b"},this.renderFilters()),c.a.createElement(G,{title:"\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430"},this.renderSortings())),a&&c.a.createElement(B,null),!!this.props.presets.length&&c.a.createElement("div",{className:"presets-buttons"},c.a.createElement("span",null,"\u043f\u0440\u0435\u0441\u0435\u0442\u044b:"),this.props.presets.map((function(t){return c.a.createElement(_,{key:t.name,text:t.name,className:"btn btn-sm btn-dark _margin-right",active:p.a.get("filter",t)===e.props.filter,onToggle:function(){e.props.selectPreset(t),e.props.openPreset()}})}))),c.a.createElement("div",{className:"top-list"},p.a.isEmpty(r)&&!a&&(n?n.message:"\u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"),!a&&d.map((function(t,a){var r=u[t.sharedChartId],n=p.a.first(r)||t;me&&console.log(n);var l=1,i=[],m=n.results.map((function(e,t){var a=i.includes(e.nickname);return i.push(e.nickname),0===t?l=1:a||e.score===p.a.get([t-1,"score"],n.results)||(l+=1),xt({},e,{topPlace:l,isSecondOccurenceInResults:a})}));return c.a.createElement("div",{className:"song-block",key:n.song+n.chartLabel},c.a.createElement("div",{className:"song-name"},c.a.createElement("div",{className:S()("chart-name",{single:"S"===n.chartType,singlep:"SP"===n.chartType,doublep:"DP"===n.chartType,double:"D"===n.chartType,coop:"COOP"===n.chartType})},c.a.createElement("span",{className:"chart-letter"},n.chartType),c.a.createElement("span",{className:"chart-number"},n.chartLevel)),c.a.createElement("div",null,n.song),c.a.createElement("div",{className:"youtube-link"},c.a.createElement("a",{href:"https://youtube.com/results?search_query=".concat(n.song.replace(/ /g,"+").replace(/-/g,""),"+").concat(n.chartLabel),target:"_blank",rel:"noopener noreferrer"},c.a.createElement(R.s,null))),c.a.createElement("div",{className:"_flex-fill"}),c.a.createElement("div",{className:S()("undo-result-button",{active:!p.a.isEmpty(r)})},c.a.createElement(R.c,{onClick:function(){return e.onUndoLatestResult(n)}}),c.a.createElement("span",{className:"number"},p.a.isEmpty(r)?n.totalResultsCount:1+n.totalResultsCount-p.a.size(r),"/",n.totalResultsCount),c.a.createElement(R.i,{className:"forward-btn",onClick:function(){return!p.a.isEmpty(r)&&e.onRedoLatestResult(n)}}))),c.a.createElement("div",{className:"charts"},!p.a.isEmpty(m)&&c.a.createElement("div",{className:"chart"},c.a.createElement("div",{className:"results"},c.a.createElement("table",null,0===a&&c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{className:"place"}),c.a.createElement("th",{className:"nickname"}),c.a.createElement("th",{className:"judge"}),c.a.createElement("th",{className:"score"},"score"),c.a.createElement("th",{className:"grade"}),c.a.createElement("th",{className:"number"},"miss"),c.a.createElement("th",{className:"number"},"bad"),c.a.createElement("th",{className:"number"},"good"),c.a.createElement("th",{className:"number"},"great"),c.a.createElement("th",{className:"number"},"perfect"),c.a.createElement("th",{className:"combo"},"combo"),c.a.createElement("th",{className:"accuracy"},"accuracy"),c.a.createElement("th",{className:"date"}))),c.a.createElement("tbody",null,m.map((function(e,t){if(e.isUnknownPlayer&&0!==t)return null;var a,r,l=b.indexOf(e.nickname);if(e.scoreIncrease&&e.date===n.latestScoreDate){var i=e.score-e.scoreIncrease;a=p.a.findLastIndex((function(e){return e.score>i}),m)-t}return c.a.createElement("tr",{key:e.score+e.nickname,className:S()({empty:!e.isExactDate,latest:e.date===n.latestScoreDate})},c.a.createElement("td",{className:"place"},e.isSecondOccurenceInResults?"":"#".concat(e.topPlace)),c.a.createElement("td",{className:"nickname",style:l>-1?{fontWeight:"bold",color:yt[l]}:{}},e.nickname,!!a&&c.a.createElement("span",{className:"change-holder up"},c.a.createElement("span",null,a),c.a.createElement(R.b,null)),me&&c.a.createElement("span",null," ",e.startingRating&&Math.round(e.startingRating)," ",e.ratingDiff&&Math.round(e.ratingDiff)," ",e.ratingDiffLast&&Math.round(e.ratingDiffLast)),!me&&g&&e.nickname===f&&e.ratingDiff&&c.a.createElement("span",null," (".concat(e.ratingDiff>0?"+":"").concat(Math.round(e.ratingDiff),")")),p.a.get("sortingType.value",s)===z.PROTAGONIST&&e.nickname===f&&n.distanceFromProtagonist>0&&c.a.createElement("span",{className:"protagonist-diff"}," ","-",(100*n.distanceFromProtagonist).toFixed(1),"%")),c.a.createElement("td",{className:S()("judge",{vj:e.isRank,hj:e.isHJ})},e.isRank&&c.a.createElement("div",{className:"inner"},e.isExactDate?"VJ":c.a.createElement(x.a,{content:c.a.createElement("div",null,"\u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u0440\u0430\u043d\u043a\u0430 \u043d\u0430 \u044d\u0442\u043e\u043c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0435 \u0431\u044b\u043b\u043e \u0443\u0433\u0430\u0434\u0430\u043d\u043e, \u043e\u0441\u043d\u043e\u0432\u044b\u0432\u0430\u044f\u0441\u044c \u043d\u0430 \u0441\u043a\u043e\u0440\u0435"),tooltipClassName:"pumpking-tooltip"},"VJ?")),e.isHJ&&c.a.createElement("div",{className:"inner"},"HJ")),c.a.createElement("td",{className:"score"},c.a.createElement(M,{overlayClassName:"score-overlay-outer",overlayItem:c.a.createElement("span",{className:"score-span"},e.scoreIncrease>.8*e.score&&"*",P()(e.score).format("0,0")),placement:"top"},c.a.createElement("div",{className:"score-overlay"},me&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement("span",{className:"_grey"},"result id: "),e.id),c.a.createElement("div",null,c.a.createElement("span",{className:"_grey"},"player id: "),e.playerId)),c.a.createElement("div",null,c.a.createElement("span",{className:"_grey"},"\u0438\u0433\u0440\u043e\u043a: "),c.a.createElement(o.c,{exact:!0,to:y.profile.getPath({id:e.playerId})},e.nickname," (",e.nicknameArcade,")")),c.a.createElement("div",null,c.a.createElement("span",{className:"_grey"},"\u043e\u043f\u044b\u0442: "),"+",P()(ce(e,n)).format("0,0")),!e.isExactDate&&c.a.createElement("div",{className:"warning"},c.a.createElement(R.g,null),"\u0440\u0435\u043a\u043e\u0440\u0434 \u0432\u0437\u044f\u0442 \u0441 my best. \u0447\u0430\u0441\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430"),!!e.isExactDate&&c.a.createElement(c.a.Fragment,null,!!e.mods&&c.a.createElement("div",null,c.a.createElement("span",{className:"_grey"},"\u043c\u043e\u0434\u044b: "),e.mods),!!e.calories&&c.a.createElement("div",null,c.a.createElement("span",{className:"_grey"},"\u043a\u043a\u0430\u043b: "),e.calories),!!e.scoreIncrease&&c.a.createElement("div",null,c.a.createElement("span",{className:"_grey"},"\u043f\u0440\u0438\u0440\u043e\u0441\u0442: "),"+",P()(e.scoreIncrease).format("0,0")),e.originalChartMix&&c.a.createElement("div",null,c.a.createElement("div",{className:"warning"},c.a.createElement(R.g,null),"\u0431\u044b\u043b\u043e \u0441\u044b\u0433\u0440\u0430\u043d\u043e \u043d\u0430 ",e.originalChartMix),e.originalChartLabel&&c.a.createElement("div",null,c.a.createElement("span",{className:"_grey"},"\u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u0447\u0430\u0440\u0442:"," "),e.originalChartLabel),e.originalScore&&c.a.createElement("div",null,c.a.createElement("span",{className:"_grey"},"\u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u043a\u043e\u0440:"," "),e.originalScore)),e.scoreIncrease>.8*e.score&&"* \u0441\u0430\u0439\u0442\u0440\u0438\u0434")))),c.a.createElement("td",{className:"grade"},c.a.createElement("div",{className:"img-holder"},e.grade&&"?"!==e.grade&&c.a.createElement("img",{src:"".concat(".","/grades/").concat(e.grade,".png"),alt:e.grade}),"?"===e.grade&&null)),c.a.createElement("td",{className:"number miss"},e.miss),c.a.createElement("td",{className:"number bad"},e.bad),c.a.createElement("td",{className:"number good"},e.good),c.a.createElement("td",{className:"number great"},e.great),c.a.createElement("td",{className:"number perfect"},e.perfect),c.a.createElement("td",{className:"combo"},e.combo,e.combo?"x":""),c.a.createElement("td",{className:"accuracy"},e.accuracy,e.accuracy?"%":""),c.a.createElement("td",{className:S()("date",{latest:e.date===n.latestScoreDate})},c.a.createElement(x.a,{content:e.isExactDate?(r=e.dateObject,r.toLocaleDateString()):vt(e.dateObject),tooltipClassName:"pumpking-tooltip"},Et(e.dateObject),e.isExactDate?"":"?")))}))))))))})),!a&&m&&c.a.createElement("button",{className:"btn btn-sm btn-primary",onClick:function(){return e.setState((function(e){return{showItemsCount:e.showItemsCount+10}}))}},"show more..."))))}}]),t}(n.Component),It=Object(i.b)((function(e){return{players:jt(e),results:e.results.results,filteredData:Pt(e),data:e.results.data,filter:e.results.filter,error:e.results.error||e.tracklist.error,isLoading:e.results.isLoading||e.tracklist.isLoading,presets:e.presets.presets,currentPreset:e.presets.currentPreset}}),Ct)(Dt),At=(a(264),function(e){return c.a.createElement("img",{src:"".concat(".","/grades/").concat(e,".png"),alt:e})});function Lt(e){var t=e.ranking,a=e.isLoading;return c.a.createElement("div",{className:"ranking-list"},p.a.isEmpty(t)&&!a&&"\u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e",a&&c.a.createElement(B,null),!a&&c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{className:"place"}),c.a.createElement("th",{className:"change"}),c.a.createElement("th",{className:"exp-rank"},"rank"),c.a.createElement("th",{className:"name"},"name"),c.a.createElement("th",{className:"name2"},"piu name"),c.a.createElement("th",{className:"rating"},"elo"),c.a.createElement("th",{className:"rating-change-cell"}),c.a.createElement("th",{className:"grades sss"},At("SSS")),c.a.createElement("th",{className:"grades ss"},At("SS")),c.a.createElement("th",{className:"grades s"},At("S")),c.a.createElement("th",{className:"grades a"},At("A+")),c.a.createElement("th",{className:"grades b"},At("B")),c.a.createElement("th",{className:"grades c"},At("C")),c.a.createElement("th",{className:"grades d"},At("D")),c.a.createElement("th",{className:"grades f"},At("F")),c.a.createElement("th",{className:"playcount"},"scores"),c.a.createElement("th",{className:"accuracy"},"accuracy"))),c.a.createElement("tbody",null,t.map((function(e,t){return c.a.createElement("tr",{className:"player",key:e.name},c.a.createElement("td",{className:"place"},0===t?c.a.createElement(oe.d,null):"#".concat(t+1)),c.a.createElement("td",{className:"change"},e.change>0&&c.a.createElement("div",{className:"change-holder up"},c.a.createElement("span",null,e.change),c.a.createElement(R.b,null)),e.change<0&&c.a.createElement("div",{className:"change-holder down"},c.a.createElement("span",null,-e.change),c.a.createElement(R.a,null)),!!e.change&&p.a.isString(e.change)&&c.a.createElement("div",{className:"change-holder text"},c.a.createElement("span",null,e.change))),c.a.createElement("td",{className:"exp-rank"},se(e.expRank)),c.a.createElement("td",{className:"name"},c.a.createElement(o.c,{exact:!0,to:y.profile.getPath({id:e.id})},e.name)),c.a.createElement("td",{className:"name"},c.a.createElement(o.c,{exact:!0,to:y.profile.getPath({id:e.id})},e.nameArcade)),c.a.createElement("td",{className:"rating"},e.rating),c.a.createElement("td",{className:"rating-change-cell"},!!e.prevRating&&e.prevRating!==e.rating&&c.a.createElement("span",{className:S()("rating-change",{down:e.prevRating>e.rating,up:e.prevRating<e.rating})},e.prevRating<e.rating?"+":"",e.rating-e.prevRating)),c.a.createElement("td",{className:"grades sss"},e.grades.SSS),c.a.createElement("td",{className:"grades ss"},e.grades.SS),c.a.createElement("td",{className:"grades s"},e.grades.S),c.a.createElement("td",{className:"grades a"},e.grades.A),c.a.createElement("td",{className:"grades b"},e.grades.B),c.a.createElement("td",{className:"grades c"},e.grades.C),c.a.createElement("td",{className:"grades d"},e.grades.D),c.a.createElement("td",{className:"grades f"},e.grades.F),c.a.createElement("td",{className:"playcount"},e.count),c.a.createElement("td",{className:"accuracy"},e.accuracy?"".concat(e.accuracy.toFixed(2),"%"):""))})))))}function Ft(){return c.a.createElement("div",{className:"faq"},c.a.createElement("div",{className:"question-answer"},c.a.createElement("div",{className:"question"},"Q: \u041a\u0430\u043a \u0441\u0447\u0438\u0442\u0430\u0435\u0442\u0441\u044f \u0440\u0435\u0439\u0442\u0438\u043d\u0433?"),c.a.createElement("div",{className:"answer"},"A: \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f ",c.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Elo_rating_system"},"\u0440\u0435\u0439\u0442\u0438\u043d\u0433 \u042d\u043b\u043e"),", \u0448\u0438\u0440\u043e\u043a\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0439 \u0432 \u0448\u0430\u0445\u043c\u0430\u0442\u0430\u0445 \u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u0438\u0433\u0440\u0430\u0445, \u0441\u043b\u0435\u0433\u043a\u0430 \u043c\u043e\u0434\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043f\u043e\u0434 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0438\u0433\u0440\u044b \u043d\u0430 \u043f\u0430\u043c\u043f\u0435. \u0421\u0440\u0435\u0434\u043d\u0438\u0439 \u0440\u0435\u0439\u0442\u0438\u043d\u0433 - 1000. \u041a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442 \u041a \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0443\u0440\u043e\u0432\u043d\u044f \u0447\u0430\u0440\u0442\u0430 (\u0431\u043e\u043b\u0435\u0435 \u0441\u043b\u043e\u0436\u043d\u044b\u0435 \u0447\u0430\u0440\u0442\u044b \u0441\u0438\u043b\u044c\u043d\u0435\u0435 \u0432\u043b\u0438\u044f\u044e\u0442 \u043d\u0430 \u0440\u0435\u0439\u0442\u0438\u043d\u0433). \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0447\u043a\u043e\u0432 \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u0437\u0430\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u044b\u0439 \u0440\u0435\u0439\u0442\u0438\u043d\u0433 (\u043c\u0430\u043b\u0435\u043d\u044c\u043a\u0438\u0439 \u043e\u0442\u0440\u044b\u0432 \u043e\u0442 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u0438\u043a\u0430 \u043d\u0435 \u0434\u0430\u0441\u0442 \u0442\u0430\u043a \u043c\u043d\u043e\u0433\u043e \u043e\u0447\u043a\u043e\u0432 \u043a\u0430\u043a \u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u043e\u0442\u0440\u044b\u0432).")),c.a.createElement("div",{className:"question-answer"},c.a.createElement("div",{className:"question"},"Q: \u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u042d\u043b\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0438\u0433\u0440 1 \u043d\u0430 1, \u043a\u0430\u043a \u043e\u043d\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043d\u0430 \u043f\u0430\u043c\u043f\u0435, \u0433\u0434\u0435 \u043d\u0430 \u043e\u0434\u043d\u043e\u043c \u0447\u0430\u0440\u0442\u0435 \u0438\u0433\u0440\u0430\u0435\u0442 \u043c\u043d\u043e\u0433\u043e \u0438\u0433\u0440\u043e\u043a\u043e\u0432?"),c.a.createElement("div",{className:"answer"},"A: \u0420\u0435\u043a\u043e\u0440\u0434\u044b \u043d\u0430 \u043e\u0434\u043d\u043e\u043c \u0447\u0430\u0440\u0442\u0435 \u0434\u0435\u043b\u044f\u0442\u0441\u044f \u043d\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0438\u0433\u0440 1 \u043d\u0430 1. \u0415\u0441\u043b\u0438 \u0435\u0441\u0442\u044c 3 \u0438\u0433\u0440\u043e\u043a\u0430: A, B, C; \u0442\u043e \u0441\u0447\u0438\u0442\u0430\u0435\u0442\u0441\u044f, \u0447\u0442\u043e \u0431\u044b\u043b\u043e 3 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0435 \u0438\u0433\u0440\u044b: A vs B, A vs C, B vs C.")),c.a.createElement("div",{className:"question-answer"},c.a.createElement("div",{className:"question"},"Q: \u0423\u0447\u0438\u0442\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u043b\u0438 \u0440\u0435\u043a\u043e\u0440\u0434\u044b \u043d\u0430 \u0440\u0430\u043d\u043a\u0435 \u0432 \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0435?"),c.a.createElement("div",{className:"answer"},"A: \u0414\u0430. \u041a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u0443 \u043d\u0430\u0441 \u0435\u0441\u0442\u044c \u043c\u043d\u043e\u0433\u043e \u0440\u0435\u043a\u043e\u0440\u0434\u043e\u0432, \u0432\u0437\u044f\u0442\u044b\u0445 \u0441 \u043c\u0430\u0448\u0438\u043d \u0431\u0435\u0441\u0442\u043e\u0432, \u0438 \u043c\u044b \u043d\u0435 \u0437\u043d\u0430\u0435\u043c \u043d\u0430\u0432\u0435\u0440\u043d\u044f\u043a\u0430, \u043d\u0430 \u0440\u0430\u043d\u043a\u0435 \u043e\u043d\u0438 \u0438\u043b\u0438 \u043d\u0435\u0442. \u0415\u0441\u043b\u0438 \u0443 \u0438\u0433\u0440\u043e\u043a\u0430 \u0432 \u0442\u043e\u043f\u0435 \u0435\u0441\u0442\u044c \u0434\u0432\u0430 \u0441\u043a\u043e\u0440\u0430 - \u043d\u0430 \u0440\u0430\u043d\u043a\u0435 \u0438 \u0431\u0435\u0437 \u0440\u0430\u043d\u043a\u0430, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0442\u043e\u0442, \u0433\u0434\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e\u0447\u043a\u043e\u0432.")),c.a.createElement("div",{className:"question-answer"},c.a.createElement("div",{className:"question"},"Q: \u041f\u043e\u0447\u0435\u043c\u0443 \u043c\u0435\u043d\u044f \u043d\u0435\u0442 \u0432 \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0435?"),c.a.createElement("div",{className:"answer"},"A: \u0412 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u043f\u043e\u043f\u0430\u0434\u0430\u044e\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0435, \u0443 \u043a\u043e\u0433\u043e \u0435\u0441\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b 20 \u0438\u0433\u0440 1 \u043d\u0430 1. \u041f\u0435\u0440\u0432\u044b\u0435 20 \u0438\u0433\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0438\u0437\u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0430.")),c.a.createElement("div",{className:"question-answer"},c.a.createElement("div",{className:"question"},"Q: \u041f\u043e\u0447\u0435\u043c\u0443 \u0441\u0443\u043c\u043c\u0430\u0440\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0446\u0435\u043d\u043e\u043a S-A-B \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0435\u0442 \u0441 \u043e\u0431\u0449\u0438\u043c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u043c \u0441\u043a\u043e\u0440\u043e\u0432?"),c.a.createElement("div",{className:"answer"},"A: \u041d\u0435 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430 \u043e\u0446\u0435\u043d\u043a\u0430.")),c.a.createElement("div",{className:"question-answer"},c.a.createElement("div",{className:"question"},"Q: \u0415\u0441\u043b\u0438 \u0443 \u043c\u0435\u043d\u044f \u0435\u0441\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0435\u043a\u043e\u0440\u0434\u043e\u0432 \u043d\u0430 \u0410, \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u0410+, \u043a\u0430\u043a \u0441\u0447\u0438\u0442\u0430\u0435\u0442\u0441\u044f \u0441\u0443\u043c\u043c\u0430\u0440\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0433\u0440\u0435\u0439\u0434\u043e\u0432 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435?"),c.a.createElement("div",{className:"answer"},"A: \u0412 \u043a\u0430\u0436\u0434\u043e\u0439 \u043a\u043e\u043b\u043e\u043d\u043a\u0435 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u043e\u0431\u0435 \u0431\u0443\u043a\u0432\u044b - \u0438 \u0442\u0440\u0435\u0441\u043d\u0443\u0442\u044b\u0435, \u0438 \u0441 \u0443\u0434\u0435\u0440\u0436\u0430\u043d\u043d\u044b\u043c \u043b\u0430\u0439\u0444\u043e\u043c. \u0422\u043e \u0435\u0441\u0442\u044c \u0438 \u0410, \u0438 \u0410+ \u0438\u0434\u0443\u0442 \u0432 \u043a\u043e\u043b\u043e\u043d\u043a\u0443 \u0410. \u0422\u043e\u0447\u043d\u043e \u0442\u0430\u043a \u0436\u0435 \u0434\u043b\u044f B, C, D.")),c.a.createElement("div",{className:"question-answer"},c.a.createElement("div",{className:"question"},"Q: \u0423\u0431\u0435\u0440\u0438 \u0430\u043a\u043a\u0443\u0440\u0430\u0441\u0438 \u0438\u0437 \u0442\u0430\u0431\u043b\u0438\u0446\u044b!"),c.a.createElement("div",{className:"answer"},"A: \u0413\u0440\u0435\u043c, \u044d\u0442\u043e \u0441\u0435\u043a\u0446\u0438\u044f \u0434\u043b\u044f \u0432\u043e\u043f\u0440\u043e\u0441\u043e\u0432.")))}var Tt=Object(Ot.a)((function(e){return e.results.profiles}),p.a.flow(p.a.values,p.a.orderBy(["ratingRaw"],["desc"]))),Mt={fetchResults:Ke},_t=function(e){function t(){var e,a;Object(g.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(n)))).onRefresh=function(){!a.props.isLoading&&a.props.fetchResults()},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.isLoading,r=t.ranking,n=t.error;return c.a.createElement("div",{className:"ranking-page"},c.a.createElement("div",{className:"content"},n&&n.message,c.a.createElement("div",{className:"top-controls"},c.a.createElement("div",{className:"_flex-fill"}),c.a.createElement(E.b,{exact:!0,path:y.ranking.path,render:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(o.b,{to:y.ranking.faq.path},c.a.createElement("button",{className:"btn btn-sm btn-dark btn-icon _margin-right"},c.a.createElement(R.m,null)," faq")),c.a.createElement("button",{disabled:a,className:"btn btn-sm btn-dark btn-icon",onClick:e.onRefresh},c.a.createElement(R.p,null)," \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"))}}),c.a.createElement(E.b,{exact:!0,path:y.ranking.faq.path,render:function(){return c.a.createElement(o.b,{to:y.ranking.path},c.a.createElement("button",{className:"btn btn-sm btn-dark btn-icon"},"\u043d\u0430\u0437\u0430\u0434"))}})),c.a.createElement(E.b,{exact:!0,path:y.ranking.path,render:function(){return c.a.createElement(Lt,{ranking:r,isLoading:a})}}),c.a.createElement(E.b,{exact:!0,path:y.ranking.faq.path,component:Ft})))}}]),t}(n.Component);_t.defaultProps={ranking:[]};var Bt=Object(i.b)((function(e){return{ranking:Tt(e),error:e.results.error||e.tracklist.error,isLoading:e.results.isLoading||e.tracklist.isLoading}}),Mt)(Object(E.f)(_t)),Kt=a(187),qt=a.n(Kt),Gt=a(6),Ht=(a(447),a(197)),Ut=(a(448),Object(i.b)((function(e,t){return{charts:e.results.sharedCharts}}))((function(e){var t=e.playerId,a=e.charts,r=Object(n.useState)(!1),s=Object(ae.a)(r,2),l=s[0],o=s[1],i=Object(n.useState)(10),u=Object(ae.a)(i,2),m=u[0],d=u[1],g=Object(n.useState)([]),h=Object(ae.a)(g,2),f=h[0],b=h[1];return Object(n.useEffect)((function(){o(!0),re({url:"".concat(Se,"/player/").concat(t,"/mostPlayed?limit=").concat(m)}).then((function(e){o(!1),e.success&&b(e.data)})).catch((function(){o(!1)}))}),[t,m]),c.a.createElement("div",{className:"most-played"},l&&c.a.createElement(B,null),f.map((function(e){var r=a[e.shared_chart],n=p.a.get("dateObject",p.a.find({playerId:p.a.toNumber(t)},r.results));return c.a.createElement("div",{className:"chart",key:e.shared_chart},c.a.createElement("div",{className:S()("chart-name",{single:"S"===r.chartType,singlep:"SP"===r.chartType,doublep:"DP"===r.chartType,double:"D"===r.chartType,coop:"COOP"===r.chartType})},c.a.createElement("span",{className:"chart-letter"},r.chartType),c.a.createElement("span",{className:"chart-number"},r.chartLevel)),c.a.createElement("div",{className:"song-name"},r.song),c.a.createElement("div",{className:"date"},n?Et(n):null),c.a.createElement("div",{className:"playcount"},c.a.createElement(R.k,null),c.a.createElement("span",null,e.count)))})),m===p.a.size(f)&&c.a.createElement("button",{className:"show-more btn btn-sm btn-dark btn-icon",onClick:function(){return d(m+10)}},c.a.createElement(Ht.a,null)," \u0431\u043e\u043b\u044c\u0448\u0435"))})));function Vt(){return c.a.createElement("div",{className:"faq-exp"},c.a.createElement("div",{className:"faq-header"},c.a.createElement("strong",null,"\u041e\u043f\u044b\u0442")," \u0438\u0433\u0440\u043e\u043a\u0430 \u043e\u0441\u043d\u043e\u0432\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0435 \u0441\u044b\u0433\u0440\u0430\u043d\u043d\u044b\u0445 \u043f\u0435\u0441\u0435\u043d \u0438 \u0447\u0430\u0440\u0442\u043e\u0432.",c.a.createElement("br",null),"\u0427\u0435\u043c \u0432\u044b\u0448\u0435 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u0447\u0430\u0440\u0442\u0430 \u0438 \u0447\u0435\u043c \u043b\u0443\u0447\u0448\u0435 \u043e\u0446\u0435\u043d\u043a\u0430 \u043d\u0430 \u0447\u0430\u0440\u0442\u0435, \u0442\u0435\u043c \u0431\u043e\u043b\u044c\u0448\u0435 \u043e\u043f\u044b\u0442\u0430 \u043e\u043d \u0434\u0430\u0451\u0442.",c.a.createElement("br",null),"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0438 \u043d\u0430 \u0442\u0435\u0445 \u0436\u0435 \u0447\u0430\u0440\u0442\u0430\u0445 \u043d\u0435 \u0434\u0430\u044e\u0442 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e\u043f\u044b\u0442\u0430. \u0427\u0442\u043e\u0431\u044b \u043f\u043e\u0434\u043d\u0438\u043c\u0430\u0442\u044c \u0441\u0432\u043e\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c, \u0438\u0433\u0440\u0430\u0439 \u043d\u043e\u0432\u044b\u0435 \u0442\u0440\u0435\u043a\u0438 \u0438 \u0447\u0430\u0440\u0442\u044b."),c.a.createElement("div",{className:"faq-header"},"\u0421\u043f\u0438\u0441\u043e\u043a \u0443\u0440\u043e\u0432\u043d\u0435\u0439 \u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0439 \u043e\u043f\u044b\u0442 \u0434\u043b\u044f \u0438\u0445 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f:"),c.a.createElement("div",{className:"ranks-list"},le.map((function(e){return c.a.createElement("div",{key:e.threshold,className:"rank"},c.a.createElement("div",{className:"exp-rank"},se(e)),c.a.createElement("div",{className:"threshold"},e.threshold))}))))}function Wt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function zt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Jt={SSS:0,SS:0,S:0,"A+":0,A:0,B:0,C:0,D:0,F:0},Zt=p.a.flow(p.a.flatMap((function(e){return p.a.flow(p.a.toPairs,p.a.map((function(t){var a=Object(ae.a)(t,2),r=a[0],n=a[1];return["".concat(e,"-").concat(r),n]})))(Jt)})),p.a.fromPairs)(["S","D"]),Xt=function(e,t){var a=p.a.findIndex((function(e){return e.date>t[0]}),e),r=p.a.findLastIndex((function(e){return e.date<t[1]}),e),n=a>0?e[a-1]:0===a?e[a]:p.a.last(e),c=r>-1?e[r]:p.a.first(e);n=zt({},n,{date:t[0]}),c=zt({},c,{date:t[1]});var s=a>-1&&r>-1?e.slice(a,r+1):[];return[n].concat(Object(O.a)(s),[c])},Qt=Object(Ot.a)((function(e,t){return p.a.toInteger(t.match.params.id)}),(function(e){return e.results.profiles}),(function(e){return e.profiles.filter}),(function(e){return e.tracklist.data}),(function(e,t,a,r){var n=t[e];if(p.a.isEmpty(n))return null;var c=p.a.flow(p.a.get("resultsByLevel"),p.a.toPairs,p.a.map((function(e){var t=Object(ae.a)(e,2),a=t[0],n=t[1];return{x:p.a.toInteger(a),S:p.a.size(p.a.filter((function(e){return"S"===e.chart.chartType||"SP"===e.chart.chartType}),n))/r.singlesLevels[a]*100,D:-p.a.size(p.a.filter((function(e){return"D"===e.chart.chartType||"DP"===e.chart.chartType}),n))/r.doublesLevels[a]*100}})))(n),s=p.a.flow(p.a.get("resultsByLevel"),p.a.toPairs,p.a.map(p.a.update("[1].result.grade",(function(e){return e&&e.includes("+")&&"A+"!==e?e.replace("+",""):e}))))(n),l=p.a.flow(p.a.map((function(e){var t=Object(ae.a)(e,2),a=t[0],r=t[1];return zt({x:p.a.toInteger(a)},Jt,{},p.a.omit("?",p.a.mapValues(p.a.size,p.a.groupBy("result.grade",r))))})),p.a.map((function(e){var t=p.a.pick(Object.keys(Jt),e),a=p.a.sum(p.a.values(t));return zt({},e,{gradesValues:t},0===a?t:p.a.mapValues((function(e){return 100*e/a}),t))})))(s),o=p.a.flow(p.a.map((function(e){var t=Object(ae.a)(e,2),a=t[0],n=t[1],c=p.a.groupBy("result.grade",n),s=p.a.omit("?",p.a.mapValues(p.a.countBy((function(e){return"S"===e.chart.chartType||"SP"===e.chart.chartType?"S":"D"===e.chart.chartType||"DP"===e.chart.chartType?"D":"Other"})),c)),l=p.a.reduce((function(e,t){var n=Object(ae.a)(t,2),c=n[0],s=n[1];return zt({},e,{},p.a.flow(p.a.toPairs,p.a.map((function(e){var t=Object(ae.a)(e,2),n=t[0],s=t[1];return["".concat(n,"-").concat(c),"S"===n?s/r.singlesLevels[a]*100:-s/r.doublesLevels[a]*100]})),p.a.fromPairs)(s))}),{},p.a.toPairs(s));return zt({x:p.a.toInteger(a)},Zt,{},l)})))(s),i=p.a.last(n.ratingHistory).date,u=p.a.last(n.rankingHistory).date,m=i>u?i:u,d=p.a.first(n.ratingHistory).date,g=ht()(m).endOf("day"),h=[ht()(d).startOf("day")/1e3/60/60/24,g/1e3/60/60/24],f=a.dayRange||[Math.max(h[0],h[1]-30),h[1]],b=[+ht()(1e3*f[0]*60*60*24).startOf("day"),+ht()(1e3*f[1]*60*60*24).endOf("day")],v=Xt(n.rankingHistory,b),E=Xt(n.ratingHistory,b);return zt({},n,{rank:1+p.a.findIndex({id:e},p.a.orderBy(["ratingRaw"],["desc"],p.a.values(t))),minMaxRange:h,filterRange:f,levelsDistribution:c,gradesDistribution:l,gradesAndLevelsDistribution:o,placesChanges:v,ratingChanges:E})})),Yt={fetchResults:Ke,setProfilesFilter:function(e){return{type:Ee,filter:e}},resetProfilesFilter:function(){return{type:ye}}},$t=function(e){function t(){var e,a;Object(g.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(n)))).state={isLevelGraphCombined:!0,showFaq:!1},a.onRefresh=function(){!a.props.isLoading&&a.props.fetchResults()},a.onChangeDayRange=function(e){var t=a.props.filter;a.props.setProfilesFilter(zt({},t,{dayRange:e}))},a.onShowFaq=function(){a.setState({showFaq:!0})},a.onHideFaq=function(){a.setState({showFaq:!1})},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillUnmount",value:function(){this.props.resetProfilesFilter()}},{key:"renderRankingHistory",value:function(){var e=this.props.profile;return c.a.createElement(Gt.i,{minHeight:void 0,aspect:1.6},c.a.createElement(Gt.g,{data:e.ratingChanges,margin:{top:5,bottom:5,right:5,left:0}},c.a.createElement(Gt.c,{strokeDasharray:"3 3"}),c.a.createElement(Gt.k,{dataKey:"date",type:"number",domain:["dataMin","dataMax"],tickFormatter:function(e){return new Date(e).toLocaleDateString()}}),c.a.createElement(Gt.l,{allowDecimals:!1,domain:["dataMin - 100","dataMax + 100"],tickFormatter:Math.round,width:40}),c.a.createElement(Gt.h,{y:1e3,stroke:"white"}),c.a.createElement(Gt.j,{isAnimationActive:!1,content:function(e){e.active;var t=e.payload;e.label;return t&&t[0]?c.a.createElement("div",{className:"history-tooltip"},c.a.createElement("div",null,new Date(t[0].payload.date).toLocaleDateString()),t&&t[0]&&c.a.createElement("div",null,"Rating: ",Math.round(t[0].value))):null}}),c.a.createElement(Gt.f,{type:"monotone",isAnimationActive:!1,dataKey:"rating",stroke:"#88d3ff",strokeWidth:3,dot:!1})))}},{key:"renderPlaceHistory",value:function(){var e=this.props.profile;return c.a.createElement(Gt.i,{minHeight:void 0,aspect:1.6},c.a.createElement(Gt.g,{data:e.placesChanges,margin:{top:5,bottom:5,right:5,left:0}},c.a.createElement(Gt.c,{strokeDasharray:"3 3"}),c.a.createElement(Gt.k,{dataKey:"date",type:"number",domain:["dataMin","dataMax"],tickFormatter:function(e){return new Date(e).toLocaleDateString()}}),c.a.createElement(Gt.l,{allowDecimals:!1,domain:[1,function(e){return e<3?e+2:e+1}],interval:0,reversed:!0,width:40}),c.a.createElement(Gt.j,{isAnimationActive:!1,content:function(e){e.active;var t=e.payload;e.label;return t&&t[0]?c.a.createElement("div",{className:"history-tooltip"},c.a.createElement("div",null,new Date(t[0].payload.date).toLocaleDateString()),t&&t[0]&&c.a.createElement("div",null,"Place: #",t[0].value)):null}}),c.a.createElement(Gt.f,{isAnimationActive:!1,type:"stepAfter",dataKey:"place",stroke:"#88d3ff",strokeWidth:3,dot:!1})))}},{key:"renderGrades",value:function(){var e=this.props.profile;return c.a.createElement(Gt.i,{minHeight:void 0,aspect:1.6},c.a.createElement(Gt.b,{data:e.gradesDistribution,margin:{top:5,bottom:5,right:5,left:0}},c.a.createElement(Gt.j,{isAnimationActive:!1,content:function(e){e.active;var t=e.payload;e.label;return t&&t[0]?c.a.createElement("div",{className:"history-tooltip"},c.a.createElement("div",null,"Level: ",t[0].payload.x),p.a.filter((function(e){return e.value>0}),t).map((function(e){return c.a.createElement("div",{key:e.name,style:{fontWeight:"bold",color:e.color}},e.name,": ",t[0].payload.gradesValues[e.name])}))):null}}),c.a.createElement(Gt.k,{dataKey:"x"}),c.a.createElement(Gt.l,{domain:[0,100],ticks:[0,50,100],tickFormatter:function(e){return"".concat(Math.round(e),"%")},width:40}),c.a.createElement(Gt.e,null),c.a.createElement(Gt.a,{dataKey:"SSS",fill:"#ffd700",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"SS",fill:"#dab800",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"S",fill:"#b19500",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"A+",fill:"#396eef",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"A",fill:"#828fb7",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"B",fill:"#7a6490",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"C",fill:"#6d5684",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"D",fill:"#5d4e6d",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"F",fill:"#774949",stackId:"stack"})))}},{key:"renderGradesWithLevels",value:function(){var e=this.props,t=e.profile,a=e.tracklist;return c.a.createElement(Gt.i,{minHeight:void 0,aspect:.74},c.a.createElement(Gt.b,{data:t.gradesAndLevelsDistribution,margin:{top:5,bottom:5,right:5,left:0},stackOffset:"sign"},c.a.createElement(Gt.j,{isAnimationActive:!1,content:function(e){e.active;var t=e.payload;e.label;if(!t||!t[0])return null;var r=p.a.filter((function(e){return 0!==e.value&&e.dataKey.startsWith("D")}),t),n=p.a.filter((function(e){return 0!==e.value&&e.dataKey.startsWith("S")}),t);return c.a.createElement("div",{className:"history-tooltip"},c.a.createElement("div",null,"Level: ",t[0].payload.x),!!n.length&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,"Single:"),n.map((function(e){return c.a.createElement("div",{key:e.name,style:{fontWeight:"bold",color:e.color}},e.name.slice(2),": ",Math.round(Math.abs(e.value)),"% (",Math.round(a.singlesLevels[e.payload.x]*e.value/100),"/",a.singlesLevels[e.payload.x],")")}))),!!r.length&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,"Double:"),r.map((function(e){return c.a.createElement("div",{key:e.name,style:{fontWeight:"bold",color:e.color}},e.name.slice(2),": ",Math.round(Math.abs(e.value)),"% (",Math.round(a.doublesLevels[e.payload.x]*-e.value/100),"/",a.doublesLevels[e.payload.x],")")}))))}}),c.a.createElement(Gt.k,{dataKey:"x"}),c.a.createElement(Gt.l,{tickFormatter:function(e){return"".concat(Math.round(Math.abs(e)),"%")},width:40,domain:[function(e){return Math.min(e,-10)},function(e){return Math.max(10,e)}]}),c.a.createElement(Gt.a,{dataKey:"S-SSS",fill:"#ffd700",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"S-SS",fill:"#dab800",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"S-S",fill:"#b19500",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"S-A+",fill:"#396eef",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"S-A",fill:"#828fb7",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"S-B",fill:"#7a6490",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"S-C",fill:"#6d5684",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"S-D",fill:"#5d4e6d",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"S-F",fill:"#774949",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"D-SSS",fill:"#ffd700",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"D-SS",fill:"#dab800",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"D-S",fill:"#b19500",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"D-A+",fill:"#396eef",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"D-A",fill:"#828fb7",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"D-B",fill:"#7a6490",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"D-C",fill:"#6d5684",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"D-D",fill:"#5d4e6d",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"D-F",fill:"#774949",stackId:"stack"}),c.a.createElement(Gt.d,{value:"Double",offset:0,position:"insideBottomLeft"}),c.a.createElement(Gt.d,{value:"Single",offset:0,position:"insideTopLeft"}),c.a.createElement(Gt.h,{y:0,stroke:"#bbb"})))}},{key:"renderLevels",value:function(){var e=this.props,t=e.profile,a=e.tracklist;return c.a.createElement(Gt.i,{minHeight:void 0,aspect:1.6},c.a.createElement(Gt.b,{data:t.levelsDistribution,stackOffset:"sign",margin:{top:5,bottom:5,right:5,left:0}},c.a.createElement(Gt.j,{isAnimationActive:!1,content:function(e){e.active;var t=e.payload;e.label;if(!t||!t[0])return null;var r=a.doublesLevels[t[0].payload.x],n=a.singlesLevels[t[0].payload.x];return c.a.createElement("div",{className:"history-tooltip"},c.a.createElement("div",null,"Level: ",t[0].payload.x),n>0&&c.a.createElement("div",{style:{fontWeight:"bold",color:t[1].color}},"Single: ",Math.abs(t[1].value).toFixed(1),"% (",Math.round(t[1].value*n/100),"/",n,")"),r>0&&c.a.createElement("div",{style:{fontWeight:"bold",color:t[0].color}},"Double: ",Math.abs(t[0].value).toFixed(1),"% (",Math.round(Math.abs(t[0].value)*r/100),"/",r,")"))}}),c.a.createElement(Gt.k,{dataKey:"x"}),c.a.createElement(Gt.l,{tickFormatter:function(e){return Math.round(Math.abs(e))+"%"},width:40,domain:[function(e){return Math.min(e,-10)},function(e){return Math.max(10,e)}]}),c.a.createElement(Gt.j,null),c.a.createElement(Gt.h,{y:0,stroke:"#555"}),c.a.createElement(Gt.e,null),c.a.createElement(Gt.a,{dataKey:"D",fill:"#169c16",stackId:"stack"}),c.a.createElement(Gt.a,{dataKey:"S",fill:"#af2928",stackId:"stack"})))}},{key:"renderGradeBlock",value:function(e,t){var a=this.props.profile.progress[e],r="double"===e?"D":"S",n=Math.floor(100*(a["".concat(t,"-bonus-level-coef")]||0)),s=a["".concat(t,"-bonus-level-min-number")],l=a["".concat(t,"-bonus-level-achieved-number")],o=a["".concat(t,"-bonus-level")]?"".concat(r).concat(a["".concat(t,"-bonus-level")]):"?";return c.a.createElement("div",{className:"grade-block"},c.a.createElement("div",{className:"grade-letter"},c.a.createElement("img",{src:"".concat(".","/grades/").concat(t,".png"),alt:t})),c.a.createElement("div",{className:"grade-level"},o),c.a.createElement("div",{className:"grade-progress"},n,"% (",100===n?s:l,"/",s,")"),c.a.createElement("div",{className:"grade-progress"},"\u0431\u043e\u043d\u0443\u0441: +",Math.floor(a["".concat(t,"-bonus")])),c.a.createElement("div",{className:S()("progress-background",{complete:100===n,zero:0===n}),style:{height:"".concat(n,"%")}}))}},{key:"renderAchievement",value:function(e,t){var a=ie[e].icon,r=ie[e].description;return c.a.createElement(x.a,{key:e,content:c.a.createElement("div",null,r),tooltipClassName:"pumpking-tooltip achievement-tooltip"},c.a.createElement("div",{className:"ach-block"},a&&c.a.createElement("div",{className:"ach-icon"},c.a.createElement(a,null)),c.a.createElement("div",{className:"ach-name"},e),c.a.createElement("div",{className:S()("progress-background",{complete:100===t.progress,zero:0===t.progress}),style:{height:"".concat(Math.round(t.progress),"%")}})))}},{key:"render",value:function(){var e=this,t=this.props,a=t.isLoading,r=t.profile,n=t.error,s=t.filter,l=this.state.isLevelGraphCombined;if(p.a.isEmpty(r))return null;var o=r.expRankNext?(r.exp-r.expRank.threshold)/(r.expRankNext.threshold-r.expRank.threshold):100;return c.a.createElement("div",{className:"profile-page"},c.a.createElement("div",{className:"content"},n&&n.message,c.a.createElement("div",{className:"top-controls"},c.a.createElement("div",{className:"_flex-fill"}),c.a.createElement("button",{disabled:a,className:"btn btn-sm btn-dark btn-icon",onClick:this.onRefresh},c.a.createElement(R.p,null)," \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c")),a&&c.a.createElement(B,null),!a&&c.a.createElement("div",{className:"profile"},c.a.createElement("div",{className:"profile-header"},c.a.createElement("div",{className:"profile-name text-with-header"},c.a.createElement("div",{className:"text-header"},"\u0438\u0433\u0440\u043e\u043a"),c.a.createElement("div",null,r.name)),c.a.createElement("div",{className:"text-with-header"},c.a.createElement("div",{className:"text-header"},"\u0440\u0430\u043d\u043a"),c.a.createElement("div",null,"#",r.rank)),c.a.createElement("div",{className:"text-with-header"},c.a.createElement("div",{className:"text-header"},"\u044d\u043b\u043e"),c.a.createElement("div",null,r.rating)),c.a.createElement("div",{className:"text-with-header"},c.a.createElement("div",{className:"text-header"},"\u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u0438\u0433\u0440\u0430"),c.a.createElement("div",null,r.lastResultDate?Et(r.lastResultDate):"\u043d\u0438\u043a\u043e\u0433\u0434\u0430"))),c.a.createElement("div",{className:"profile-section"},c.a.createElement("div",{className:"profile-sm-section-header _flex-row _align-center"},c.a.createElement("span",null,"\u043e\u043f\u044b\u0442"),c.a.createElement("div",{className:"_flex-fill"}),c.a.createElement("div",{onClick:this.onShowFaq,className:"_clickable"},c.a.createElement(R.m,{onClick:this.onShowFaq})),c.a.createElement(qt.a,{ariaHideApp:!1,className:"Modal faq-modal",overlayClassName:"Overlay",isOpen:this.state.showFaq,onRequestClose:this.onHideFaq},c.a.createElement("div",{className:"close-btn",onClick:this.onHideFaq},c.a.createElement(R.q,null))," ",c.a.createElement(Vt,null))),c.a.createElement("div",{className:"exp-range"},c.a.createElement("div",{className:"rank exp-rank"},se(r.expRank),r.expRank&&c.a.createElement("div",null,r.expRank.threshold)),c.a.createElement("div",{className:"exp-line-with-label"},c.a.createElement("div",{className:"exp-label"},r.expRankNext?c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"taken-num"},Math.round(r.exp-r.expRank.threshold))," / ".concat(r.expRankNext.threshold-r.expRank.threshold)):null),c.a.createElement("div",{className:"exp-line"},c.a.createElement("div",{className:"taken",style:{width:Math.floor(100*o)+"%"}}),c.a.createElement("div",{className:"rest",style:{width:100-Math.ceil(100*o)+"%"}})),c.a.createElement("div",{className:"exp-label"},"total: ",c.a.createElement("span",{className:"taken-num"},Math.round(r.exp)))),r.expRankNext&&c.a.createElement("div",{className:"rank exp-rank"},se(r.expRankNext),r.expRankNext&&c.a.createElement("div",null,r.expRankNext.threshold)))),c.a.createElement("div",{className:"profile-section-horizontal-container"},c.a.createElement("div",{className:"profile-section"},c.a.createElement("div",{className:"profile-section-content"},l?c.a.createElement("div",{className:"profile-section-2"},c.a.createElement("div",{className:"profile-sm-section-header flex"},c.a.createElement("span",null,"\u043e\u0446\u0435\u043d\u043a\u0438"),c.a.createElement("div",{className:"toggle-holder"},c.a.createElement(q,{className:"combine-toggle",checked:l,onChange:function(){return e.setState((function(e){return{isLevelGraphCombined:!e.isLevelGraphCombined}}))}},"\u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0433\u0440\u0430\u0444\u0438\u043a\u0438"))),c.a.createElement("div",{className:"chart-container single-double-labels"},this.renderGradesWithLevels())):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"profile-section-2"},c.a.createElement("div",{className:"profile-sm-section-header flex"},c.a.createElement("span",null,"\u0443\u0440\u043e\u0432\u043d\u0438"),c.a.createElement("div",{className:"toggle-holder"},c.a.createElement(q,{className:"combine-toggle",checked:l,onChange:function(){return e.setState((function(e){return{isLevelGraphCombined:!e.isLevelGraphCombined}}))}},"\u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0433\u0440\u0430\u0444\u0438\u043a\u0438"))),c.a.createElement("div",{className:"chart-container"},this.renderLevels())),c.a.createElement("div",{className:"profile-section-2"},c.a.createElement("div",{className:"profile-sm-section-header"},c.a.createElement("span",null,"\u043e\u0446\u0435\u043d\u043a\u0438")),c.a.createElement("div",{className:"chart-container"},this.renderGrades()))))),c.a.createElement("div",{className:"profile-section"},c.a.createElement("div",{className:"profile-section-content"},c.a.createElement("div",{className:"profile-section-2"},c.a.createElement("div",{className:"profile-sm-section-header"},c.a.createElement("span",null,"\u044d\u043b\u043e")),c.a.createElement("div",{className:"chart-container"},this.renderRankingHistory())),c.a.createElement("div",{className:"profile-section-2"},c.a.createElement("div",{className:"profile-sm-section-header"},c.a.createElement("span",null,"\u043c\u0435\u0441\u0442\u043e \u0432 \u0442\u043e\u043f\u0435")),c.a.createElement("div",{className:"chart-container"},this.renderPlaceHistory()))),c.a.createElement("div",{className:"range-container"},c.a.createElement(W,{range:s.dayRange||r.filterRange,min:r.minMaxRange[0],max:r.minMaxRange[1],onChange:this.onChangeDayRange})))),c.a.createElement("div",{className:"profile-section progress-section"},c.a.createElement("div",{className:"profile-sm-section-header"},c.a.createElement("span",null,"\u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f \u043f\u043e \u0443\u0440\u043e\u0432\u043d\u044f\u043c")),c.a.createElement("div",{className:"progress-blocks-single-double"},c.a.createElement("div",{className:"progress-block"},c.a.createElement("div",{className:"achievements-grades single"},this.renderGradeBlock("single","A"),this.renderGradeBlock("single","A+"),this.renderGradeBlock("single","S"),this.renderGradeBlock("single","SS"))),c.a.createElement("div",{className:"progress-block"},c.a.createElement("div",{className:"achievements-grades double"},this.renderGradeBlock("double","A"),this.renderGradeBlock("double","A+"),this.renderGradeBlock("double","S"),this.renderGradeBlock("double","SS")))),c.a.createElement("div",{className:"bonus-faq"},"* \u0441\u0443\u043c\u043c\u0430\u0440\u043d\u044b\u0439 \u0431\u043e\u043d\u0443\u0441 (+",Math.round(r.progress.bonus),") \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043a \u0441\u0442\u0430\u0440\u0442\u043e\u0432\u043e\u043c\u0443 \u042d\u043b\u043e",c.a.createElement("br",null),"* \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0430\u0447\u0438\u0432\u043a\u0438 \u043d\u0443\u0436\u043d\u043e \u0441\u044b\u0433\u0440\u0430\u0442\u044c \u043e\u043a\u043e\u043b\u043e 10% \u0432\u0441\u0435\u0445 \u0447\u0430\u0440\u0442\u043e\u0432 \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u043b\u0435\u0432\u0435\u043b\u0430 \u043d\u0430 \u043d\u0443\u0436\u043d\u044b\u0439 \u0433\u0440\u0435\u0439\u0434")),c.a.createElement("div",{className:"profile-section"},c.a.createElement("div",{className:"profile-sm-section-header"},c.a.createElement("span",null,"\u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f")),c.a.createElement("div",{className:"achievements"},p.a.keys(r.achievements).map((function(t){return e.renderAchievement(t,r.achievements[t])})))),c.a.createElement("div",{className:"profile-section"},c.a.createElement("div",{className:"profile-sm-section-header"},c.a.createElement("span",null,"\u0447\u0430\u0441\u0442\u043e \u0438\u0433\u0440\u0430\u0435\u043c\u044b\u0435 \u0447\u0430\u0440\u0442\u044b")),c.a.createElement(Ut,{playerId:r.id})))))}}]),t}(n.Component);$t.defaultProps={profile:{}};var ea=Object(i.b)((function(e,t){return{profile:Qt(e,t),tracklist:e.tracklist.data,filter:e.profiles.filter,error:e.results.error||e.tracklist.error,isLoading:e.results.isLoading||e.tracklist.isLoading}}),Yt)(Object(E.f)($t)),ta=(a(449),function(e){function t(){return Object(g.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return c.a.createElement("header",{className:"top-bar"},c.a.createElement("nav",null,c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(o.c,{exact:!0,to:y.leaderboard.path},"leaderboard")),c.a.createElement("li",null,c.a.createElement(o.c,{exact:!0,to:y.ranking.path},"ranking")))))}}]),t}(n.Component)),aa=function(e){function t(){return Object(g.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"container"},c.a.createElement(ta,null),c.a.createElement(E.b,{exact:!0,path:"/",render:function(){return c.a.createElement(E.a,{to:y.leaderboard.path})}}),c.a.createElement(E.b,{path:y.leaderboard.path,component:It}),c.a.createElement(E.b,{path:y.ranking.path,component:Bt}),c.a.createElement(E.b,{path:y.profile.path,component:ea}))}}]),t}(n.Component),ra=a(50),na=a(128);function ca(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function sa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ca(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ca(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var la="TRACKLIST/LOADING",oa="TRACKLIST/SUCCESS",ia="TRACKLIST/ERROR",ua={isLoading:!1,data:[]};var ma=Object(ra.c)({presets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Je:var a=p.a.find({name:p.a.get("name",e.currentPreset)},t.presets);return We({},e,{currentPreset:Ye(a)||null,presets:p.a.map(Ye,t.presets)});case ze:return We({},e,{currentPreset:Ye(t.currentPreset)});case Ze:return We({},e,{isLoading:!0});case Xe:return We({},e,{isLoading:!1});default:return e}},profiles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:return be({},e,{data:t.data});case Ee:return be({},e,{filter:t.filter});case ye:return be({},e,{filter:Oe});default:return e}},ranking:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ge:return pe({},e,{data:t.ranking});case he:var a=!p.a.isEmpty(t.listPrev);return pe({},e,{data:p.a.map((function(e){var r=pe({},e,{prevRating:p.a.get(e.id,t.rankingsPointsMap)});return a?p.a.includes(r.id,t.listPrev)?p.a.includes(r.id,t.listNow)?pe({},r,{change:p.a.indexOf(r.id,t.listPrev)-p.a.indexOf(r.id,t.listNow)}):pe({},r,{change:"?"}):pe({},r,{change:"NEW"}):r}),e.data)});default:return e}},tracklist:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ua,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case la:return sa({},e,{isLoading:!0});case ia:return sa({},e,{isLoading:!1,error:t.error});case oa:return sa({},e,{isLoading:!1,data:t.data});default:return e}},results:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case we:return Pe({},e,{isLoading:!0});case Re:return Pe({},e,{isLoading:!1,error:t.error});case xe:return Pe({},e,{isLoading:!1,data:t.data,players:t.players,profiles:t.profiles,results:t.results,sharedCharts:t.sharedCharts});case Ce:return Pe({},e,{filter:t.filter});case De:return Pe({},e,{filter:Ae});case Ie:var a=!p.a.isEmpty(t.listPrev);return Pe({},e,{profiles:p.a.mapValues((function(e){var r=Pe({},e,{prevRating:p.a.get(e.id,t.rankingsPointsMap)});return a?p.a.includes(r.id,t.listPrev)?p.a.includes(r.id,t.listNow)?Pe({},r,{change:p.a.indexOf(r.id,t.listPrev)-p.a.indexOf(r.id,t.listNow)}):Pe({},r,{change:"?"}):Pe({},r,{change:"NEW"}):r}),e.profiles)});default:return e}}}),da=Object(ra.e)(ma,(window.__REDUX_DEVTOOLS_EXTENSION__,Object(ra.a)(na.a)));function pa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ga(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pa(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}m.a.getItem("filter").then((function(e){e&&da.dispatch(qe(ga({},e,{chartRange:e.chartRange&&ga({},e.chartRange,{range:p.a.every((function(e){return e>=J[0]&&e<=J[1]}),e.chartRange.range)?e.chartRange.range:J})})))})).catch((function(e){return console.error("Cannot get filter from local storage",e)})),da.dispatch(function(){var e=Object(te.a)(ee.a.mark((function e(t){var a;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:la}),e.prev=1,e.next=4,re({url:"".concat(Se,"/tracklist/stats/XX")});case 4:return a=e.sent,t({type:oa,data:a}),e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(1),t({type:ia,error:e.t0}),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()).then((function(){da.dispatch(Ke())})),l.a.render(c.a.createElement(i.a,{store:da},c.a.createElement(o.a,null,c.a.createElement(aa,null))),document.getElementById("root"))}},[[221,1,2]]]);
//# sourceMappingURL=main.26dd308d.chunk.js.map